<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Jacy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jacy">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Jacy">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jacy">
  
    <link rel="alternative" href="/atom.xml" title="Jacy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.gif">
  
  <link rel="stylesheet" href="/css/style.css">
</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://imgchr.com/i/VV4Rz9" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Jacy</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://d.weibo.com/" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="http://www.163.com/rss/" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/#signin" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/娱乐/" style="font-size: 15px;">娱乐</a> <a href="/tags/娱乐-经验/" style="font-size: 10px;">娱乐+经验</a> <a href="/tags/经验/" style="font-size: 20px;">经验</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">慢慢前行。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Jacy</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://imgchr.com/i/VV4Rz9" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Jacy</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://d.weibo.com/" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="http://www.163.com/rss/" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/#signin" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Node模块机制" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/20/Node模块机制/" class="article-date">
  	<time datetime="2016-05-20T09:11:19.000Z" itemprop="datePublished">2016-05-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/20/Node模块机制/">Node模块机制</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code>js规范缺陷：
      没有模块系统；
      标准库较少；
      没有标准接口；
      缺乏包管理系统。
</code></pre><p>CommonJS规范提出弥补当前javascript没有标准的缺陷。</p>
<p>CommonJS模块引用：require()</p>
<p>上下文提供了exports对象用于导出当前模块的方法或变量：</p>
<pre><code>//main.js
exports.add = function() {

}
//program.js
var math = require(&apos;math&apos;);
exports.increment = function(val) {
    return math.add(val,1);
}
</code></pre><p>错误：</p>
<pre><code>exports = function(){
    ...
};
</code></pre><p>exports对象是通过形参方式传入，直接赋值会改变形参的引用，但不能改变作用域外的值</p>
<pre><code>var change = function(a) {
    a = 100;
    console.log(a); //100
};
var a = 10;
change(a);
console.log(a); //10
</code></pre><p>如果要达到require引入一个类的效果，赋值给module.exports对象，这个迂回的方案不改变形参的作用。</p>
<p>node模块分为node提供的核心模块跟用户编写的文件模块。<br>核心模块在node源代码编译时已编译，node启动时即加入内存，省去文件定位和编译执行步骤，在路径分析中优先判断，故加载速度最快。<br>文件模块运行时动态加载，需完整路径分析、文件定位、编译执行过程，速度比较慢。</p>
<p>不论核心模块还是文件模块，对相同模块二次加载一律缓存优先，这是第一优先级的，不同之处在与核心模块的缓存检查优先于文件模块的。</p>
<p>不可以加载一个与核心模块标识符相同的自定义模块。</p>
<p>模块路径是node在定位文件模块的具体文件时制定的查找策略，其类似于javascript的原型链或者作用域链，先在当前文件目录下的node_modules目录查找，然后沿路径向上逐级递归，这是自定义模块加载速度是最慢的原因。</p>
<p>require()在分析标识符的过程中，会出现标识符中不包含文件扩展名的情况，这时按照.js,.json,.node次序查找。</p>
<p>.js文件：通过fs模块同步读取文件后编译执行；<br>.node文件：是c/c++编写的扩展文件，通过dlopen()方法加载最后编译生成的文件；<br>.json文件：通过fs模块同步读取文件后，用JSON.parse()解析返回结果；<br>其余扩展名文件：当作js文件载入。</p>
<p>编译过程中，node会对js文件内容进行包装：</p>
<pre><code>(function(exports,requiere,module,_filename,_dirname){
    var math = require(&apos;math&apos;);
    exports.area = function(radius) {
        return Math.PI*radius*radius;
     };
});
</code></pre><p>这样每个模块文件之间进行作用域隔离，不污染全局变量。</p>
<h2 id="包与npm"><a href="#包与npm" class="headerlink" title="包与npm"></a><strong>包与npm</strong></h2><p>在一个具体的包目录下执行npm test时，会运行test指向的脚本。<br>npm init 生成package.json文件<br>npm adduser 注册账号，npm必须要使用仓库账号才能将包发布到仓库中<br>npm publish . 上传包<br>npm owner 管理包的所有者（npm owner ls/npm owner add/npm owner rm）<br>npm ls 这个命令可以分析当前路径下可以通过模块路径找到的所有包</p>
<p>包质量和安全问题：<br>口碑效应，在npm模块首页依赖榜可以说明模块的质量和可靠性；<br>GitHub中模块项目的观察者数量和分支数量也能侧面反应其可靠性和流行度；<br>包的测试用例，没有单元测试和文档的包基本上是无法被信任的。</p>
<p>AMD规范：</p>
<pre><code>define([&apos;dep1&apos;,&apos;dep2&apos;],function(dep1,dep2){
    return function(){};
});
</code></pre><p>需要在声明时指定所有依赖<br>CMD规范：</p>
<pre><code>define(function(require,exports,module){
    //...
});
</code></pre><p>require,exports,module通过形参传递给模块，在需要依赖模块时，随时调用require()引用</p>
<p>兼容多种模块规范<br>将hello()方法定义到不同环境，兼容node，AMD，CMD及常见浏览器环境：</p>
<pre><code>;(function(name,definition){
    //检测上下文环境是否为AMD或CMD
    var hasDefine = typeof define === &apos;function&apos;,
    //检测上下文环境是否为node
    hasExports = typeof module !== &apos;undefined&apos; &amp;&amp; module.exports;
    if(hasDefine){
          //AMD环境或CMD环境
          define(definition);
     }else if(hasExports){
          //定义为普通node模块
          module.exports = definition();
     }else {
          //将模块执行结果挂在window变量中
          this[name] = definition();
     }
})(&apos;hello&apos;,function(){
    var hello = function(){};
    return hello;
});
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-游" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/11/游/" class="article-date">
  	<time datetime="2015-08-11T14:01:27.000Z" itemprop="datePublished">2015-08-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/11/游/">游</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>培训结束了，我们苦逼的游玩生涯也就开始了~~</p>
<h2 id="首站：深圳"><a href="#首站：深圳" class="headerlink" title="首站：深圳"></a>首站：深圳</h2><p>探望“老人家”时间到啦，是去看鸡汤经理还是去看熊桑呢，深圳跟北京。。。想想，去北京太过遥远了，我们要放弃熊桑了(┬＿┬)，所以我们来到了深圳，鸡汤经理之家。</p>
<p><img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182149.jpg?imageView2/2/w/203/h/203&amp;e=1439308192&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:cm8id3eI1ge3udFVu4VZoClkkmQ" alt="">  <img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150811113110.jpg?imageView2/2/w/203/h/203&amp;e=1439350353&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:nH69gLWG5KemdMicR6OjHFZITXs" alt=""><br>坐了N久的大巴车+地铁+吃了一木桶辣椒饭，我们终于到了鸡汤经理之家了(┬＿┬)，别惹我，让我趴一会。。。</p>
<p>砰砰砰几声，似乎是暴君叫我们起床了，神一样的bra跟一群女生出去逛街了，一逛就是9个小时，实在是太可怕了。码农就是码农，出去玩也少不了打码环节，捞文桑又给我们上了一下课。晚上8个男生挤在max的房间里睡觉，max默默的去客厅睡了，还是max机智，8个人的房间，只有一个人有被子盖，其他的都冷的难睡。。。</p>
<p><img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182137.jpg?imageView2/2/w/203/h/203&amp;e=1439308185&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:9p4LSI5qGP-tpN4lTt3ks6kbCbM" alt=""></p>
<h2 id="次站：西涌"><a href="#次站：西涌" class="headerlink" title="次站：西涌"></a>次站：西涌</h2><p>摸摸索索花了好几个小时才到了大鹏站，然后打仗似的上了m232进入西涌海滩，进了民宿后还是一样，别惹我，让我趴一会。。。</p>
<p>起来后就是激动人心的烧烤了，也是我们唯一获得进食的机会，要好好珍惜，(┬＿┬)。。这一顿，烤肠成了主食，喵烤的眼泪汪汪的，我们负责。。。吃。</p>
<p><img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150811000415.jpg?imageView2/2/w/203/h/203&amp;e=1439309120&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:JQW7SqFi5XtJmbQH1BllG-MxtuA" alt=""></p>
<p>晚上海滩只看到了涨潮的情景，时候不对，不怎么能玩水。天黑了就开始撕名牌哈，其实名字都看不到，凭感觉摸索了，不得不提的是，大果这个队友真给力，凶残的我都怕了。。。俗话说的好，狭路相逢勇者胜，嘿嘿，道理还是很有的。</p>
<p>晚上大家聚在一块聊天，虽然这不是稀有的事情了，但都是非常愉快的，这估计是我们除了海滩玩耍外最欢快的环节了吧。</p>
<p>看，翔是捞文的，捞文是暴君的，翔也是暴君的，那谁是我的呢？？</p>
<p><img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182151.jpg?imageView2/2/w/203/h/203&amp;e=1439309160&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:qgc-QN61IIRBc9T_Ww-YhMgysBc" alt=""> <img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182157.jpg?imageView2/2/w/203/h/203&amp;e=1439309166&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:ouI3Gy7guf_oZxDg3TTa0mXldQY" alt=""></p>
<p><img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182209.jpg?imageView2/2/w/203/h/203&amp;e=1439309176&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:7Bpw4qFSzf2NyeuUf84mQ_yNWf0" alt=""></p>
<h2 id="终点站：家"><a href="#终点站：家" class="headerlink" title="终点站：家"></a>终点站：家</h2><p>两夜冷的难睡，一回家还真是很累，出海滩，等公交，又花几个小时时间，大家都各回各家各找各妈了，培训正式结束了，暑假开始了。。。要学的东西还很多，不说了，忙活去。<br><img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182117.jpg?imageView2/2/w/203/h/203&amp;e=1439309153&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:hVKDbBM8H44uS6O9krIlU5QWb10" alt="">  <img src="http://7xl01i.com1.z0.glb.clouddn.com/QQ%E5%9B%BE%E7%89%8720150810182154.jpg?imageView2/2/w/203/h/203&amp;e=1439309161&amp;token=_zBQTrcWLsvBtfAoal3ufJWTfFXWQF-W8RYGHab3:HJm2kXhC_qtn1CbduzUaI76emFA" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/娱乐/">娱乐</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-family" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/02/family/" class="article-date">
  	<time datetime="2015-08-02T06:22:45.000Z" itemprop="datePublished">2015-08-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/02/family/">family</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>加入工作室也有1个多月了，一起培训一起看电影一起开玩笑，有组织有纪律有学习氛围有娱乐氛围有运动氛围，不管是学习环境还是娱乐环境，都是非常棒的，是很好的体验。<br>max : 协同前端组的大大大，培养了一届又一届的人才，鸡汤经理就出自他之 手，厉害又不失幽默。</p>
<p>经理 : 鸡汤经理，称号怎么来的当然是喝多了鸡汤，说多了鸡汤话，人也变得人高马大，力大无比，明年大家伙得合力丢下水的目标之一。</p>
<p>熊 : 喜欢小哈的熊，好像有点歧义，算了不解释了，都是前端的技术人员，能力十足，但是听说有缝面跪的习俗，也是明年大家伙要合力丢下水的目标。</p>
<p>暴君 : 　人称鱼，捞文的。。。是我们的暴君，暴君说的话我们不得不听，当然暴君也有听从手下建议的时候。另外，在暴君的带领下，我们是一个非常有自主意识的团队︿(￣︶￣)︽(￣︶￣)︿。</p>
<p>捞文桑 :   捞文桑，这位来自地球的兄弟星球的人类，是暴君的。。。前端技术顾问，每天跑步，他的坚持不懈精神为他带来了体重的福利，是增还是减呢，且看下回分解。︿(￣︶￣)︽(￣︶￣)︿。</p>
<p>小狮 : 考核时期的带领师兄，玩的了游戏做的了爬虫，让我知道程序员还可以应用到很多日常的娱乐中，让自己的代码成为别人的bug，嘿嘿。</p>
<p>小蛙哥 : 诶嘿嘿嘿，小蛙哥，也是个喜欢锻炼的人，一位好玩的设计师，搞笑的上课氛围让课堂很有趣，虽然我听不懂。</p>
<p>小哈 : haandpig，这是什么，我也不知道。小哈，同班同学，现在也是同事了，同样的程序员，接下来得一起去扛住猥琐的<em>\</em>*。</p>
<p>bra : bra，从不吃外卖的小哥，优秀的设计师，拥有丰富的电影、搞笑经验。</p>
<p>大瓜 ： 这就来了一个新名词了，瓜队友，对，没错，瓜队友现在已经能够超越猪队友了，那么，瓜队友跟猪队友会有什么事呢，好吧他们赢了。同时也是典型的吃货，太可怕了，下学期要不要招点土豪养大瓜。</p>
<p>大毛 ：　有丰富想象力的设计师，涉及多方面的学习，真是难为刚入门的程序员跟着她做项目了哈。</p>
<p>大果 ： 开着电摩的小土豪，程序员队友之一，又称好人果，火龙果。有着让人羡慕嫉妒恨的舍友。</p>
<p>翠 : 　这是我看的第一位玩LOL的女生，设计师师姐，以不吃晚饭为途径，(┬＿┬)，真是不容易啊。</p>
<p>瞄 :　同乡师姐，设计师一枚，原先是羊，据说学猫叫学多了硬生生把羊变成瞄了。</p>
<p>希雯 : 目前在德国学习，还没有太多的交流，所以也不是很了解，只能说，很厉害。</p>
<p>哈哈现在前端组可谓是分成了两部分，一部分是吃不胖族，在锻炼ing以求增肥，另一部分是减肥族，整天嚷嚷着要减肥，在锻炼ing以求减肥O(∩_∩)O。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/娱乐/">娱乐</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-正则表达式+Python摘录" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/02/正则表达式+Python摘录/" class="article-date">
  	<time datetime="2015-08-02T06:22:21.000Z" itemprop="datePublished">2015-08-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/02/正则表达式+Python摘录/">正则表达式+Python摘录</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##正则表达式<br>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。<br>给定一个正则表达式和另一个字符串，我们可以达到如下的目的：</p>
<ul>
<li>给定的字符串是否符合正则表达式的过滤逻辑（称作“匹配”）；</li>
<li>可以通过正则表达式，从字符串中获取我们想要的特定部分。<br>正则表达式的特点是：</li>
<li>灵活性、逻辑性和功能性非常的强；</li>
<li>可以迅速地用极简单的方式达到字符串的复杂控制。</li>
<li>对于刚接触的人来说，比较晦涩难懂。<br>###符号<br>正则表达式由一些普通字符和一些元字符（metacharacters）组成。普通字符包括大小写的字母和数字，而元字符则具有特殊的含义。<br>下表列出了所有的元字符和对它们的一个简短的描述：</li>
</ul>
<blockquote>
<p>\ ： 将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、<br>或一个八进制转义符。例如，“\n”匹配\n。“\n”匹配换行符。序列“\”匹配“\”而“(”则匹配“(”。即相当于多种编程语言中都有的“转义字符”的概念<br>。<br>^ ： 匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置。<br>$ ： 匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之前的位置。</p>
<ul>
<li>： 匹配前面的子表达式任意次。例如，zo<em>能匹配“z”，“zo”以及“zoo”。</em>等价于{0,}。</li>
</ul>
<ul>
<li>： 匹配前面的子表达式一次或多次(大于等于1次）。例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于{1,}。<br>? ： 匹配前面的子表达式零次或一次。例如，“do(es)?”可以匹配“do”或“does”中的“do”。?等价于{0,1}。<br>{n} ： n是一个非负整数。匹配确定的n次。例如，“o{2}”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个o。<br>{n,} ： n是一个非负整数。至少匹配n次。例如，“o{2,}”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。“o{1,}”等价于“o+”。“o{0,}”则等价于“o<em>”。<br>{n,m} ： m和n均为非负整数，其中n&lt;=m。最少匹配n次且最多匹配m次。例如，“o{1,3}”将匹配“fooooood”中的前三个o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格。<br>? ： 当该字符紧跟在任何一个其他限制符（</em>,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。<br>.点 ： 匹配除“\r\n”之外的任何单个字符。要匹配包括“\r\n”在内的任何字符，请使用像“[\s\S]”的模式。<br>(pattern) ： 匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“(”或“)”。<br>(?:pattern) ： 匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“(|)”来组合一个模式的各个部分是很有用。例如“industr(?:y|ies)”就是一个比“industry|industries”更简略的表达式。<br>(?=pattern) ： 正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“Windows(?=95|98|NT|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。<br>(?!pattern) ： 正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?!95|98|NT|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。<br>(?&lt;=pattern) ： 反向肯定预查，与正向肯定预查类似，只是方向相反。例如，“(?&lt;=95|98|NT|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。<br>(?&lt;!pattern) ： 反向否定预查，与正向否定预查类似，只是方向相反。例如“(?&lt;!95|98|NT|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。<br>x|y ： 匹配x或y。例如，“z|food”能匹配“z”或“food”或”zood”(此处请谨慎)。“(z|f)ood”则匹配“zood”或“food”。<br>[xyz] ：　字符集合。匹配所包含的任意一个字符。例如，“[abc]”可以匹配“plain”中的“a”。<br>[^xyz]　：　负值字符集合。匹配未包含的任意字符。例如，“[^abc]”可以匹配“plain”中的“plin”。<br>[a-z]　：　字符范围。匹配指定范围内的任意字符。例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符。<br>注意:只有连字符在字符组内部时,并且出现在两个字符之间时,才能表示字符的范围; 如果出字符组的开头,则只能表示连字符本身.<br>[^a-z]　：　负值字符范围。匹配任何不在指定范围内的任意字符。例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符。<br>\b　：　匹配一个单词边界，也就是指单词和空格间的位置（即正则表达式的“匹配”有两种概念，一种是匹配字符，一种是匹配位置，这里的\b就是匹配位置的）。例如，“er\b”可以匹配“never”中的“er”，但不能匹配“verb”中的“er”。<br>\B　：　匹配非单词边界。“er\B”能匹配“verb”中的“er”，但不能匹配“never”中的“er”。<br>\cx　：　匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的“c”字符。<br>\d　：　匹配一个数字字符。等价于[0-9]。<br>\D　：　匹配一个非数字字符。等价于[^0-9]。<br>\f　：　匹配一个换页符。等价于\x0c和\cL。<br>\n　：　匹配一个换行符。等价于\x0a和\cJ。<br>\r　：　匹配一个回车符。等价于\x0d和\cM。<br>\s　：　匹配任何不可见字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。<br>\S　：　匹配任何可见字符。等价于[^ \f\n\r\t\v]。<br>\t　：　匹配一个制表符。等价于\x09和\cI。<br>\v　：　匹配一个垂直制表符。等价于\x0b和\cK。<br>\w　：　匹配包括下划线的任何单词字符。类似但不等价于“[A-Za-z0-9_]”，这里的”单词”字符使用Unicode字符集。<br>\W　：　匹配任何非单词字符。等价于“[^A-Za-z0-9_]”。<br>\xn　：　匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“\x41”匹配“A”。“\x041”则等价于“\x04&amp;1”。正则表达式中可以使用ASCII编码。<br>\num　：　匹配num，其中num是一个正整数。对所获取的匹配的引用。例如，“(.)\1”匹配两个连续的相同字符。<br>\n　：　标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。<br>\nm　：　标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。<br>\nml　：　如果n为八进制数字（0-7），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。<br>\un　：　匹配n，其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（&copy;）。<br>\&lt; >　：　    匹配词（word）的开始（\&lt;）和结束（>）。例如正则表达式\&lt;the>能够匹配字符串”for the wise”中的”the”，但是不能匹配字符串”otherwise”中的”the”。注意：这个元字符不是所有的软件都支持的。<br>( )　：　    将 ( 和 )之间的表达式定义为“组”（group），并且将匹配这个表达式的字符保存到一个临时区域（一个正则表达式中最多可以保存9个），它们可以用 \1 到\9 的符号来引用。<br>|　：　    将两个匹配条件进行逻辑“或”（Or）运算。例如正则表达式(him|her) 匹配”it belongs to him”和”it belongs to her”，但是不能匹配”it belongs to them.”。注意：这个元字符不是所有的软件都支持的。<br>+　：　    匹配1或多个正好在它之前的那个字符。例如正则表达式9+匹配9、99、999等。注意：这个元字符不是所有的软件都支持的。<br>?　：　    匹配0或1个正好在它之前的那个字符。注意：这个元字符不是所有的软件都支持的。<br>{i} {i,j}　：　    匹配指定数目的字符，些字符是在它之前的表达式定义的。例如正则表达式A[0-9]{3}能够匹配字符”A”后面跟着正好3个数字字符的串，例如A123、A348等，但是不匹配A1234。而正则表达式[0-9]{4,6} 匹配连续的任意4个、5个或者6个数字。</li>
</ul>
</blockquote>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>将所有方法foo(a,b,c)的实例改为foo(b,a,c)。这里a、b和c可以是任何提供给方法foo()的参数。也就是说我们要实现这样的转换：<br>foo(10,7,2) –&gt; foo(7,10,2)<br>foo(x+13,y-2,10) –&gt; foo(y-2,x+13,10)<br>foo( bar(8), x+y+z, 5) –&gt; foo( x+y+z, bar(8), 5)<br>下面这条替换命令能够实现这一魔法：<br>:%s/foo(([^,]<em>),([^,]</em>),([^,)]<em>))/foo(\2,\1,\3)/g<br>让我们把它打散来加以分析。写出这个表达式的基本思路是找出foo()和它的括号中的三个参数的位置。第一个参数是用这个表达式来识别的：：([^,]</em>)，我们可以从里向外来分析它：<br>[^,] 除了逗号之外的任何字符<br>[^,]<em> 0或者多个非逗号字符<br>([^,]</em>) 将这些非逗号字符标记为\1，这样可以在之后的替换模式表达式中引用它<br>([^,]*), 我们必须找到0或者多个非逗号字符后面跟着一个逗号，并且非逗号字符那部分要标记出来以备后用。</p>
<h2 id="速记技巧"><a href="#速记技巧" class="headerlink" title="速记技巧"></a>速记技巧</h2><p>等价：<br>　　?,<em>,+,\d,\w 都是等价字符<br>　　?等价于匹配长度{0,1}
　　</em>等价于匹配长度{0,}<br>　　+等价于匹配长度{1,}<br>　　\d等价于[0-9]<br>　　\w等价于[A-Za-z_0-9]。<br>常用运算符与表达式：<br>　　^ 开始<br>　　（） 域段<br>　　[] 包含,默认是一个字符长度<br>　　[^] 不包含,默认是一个字符长度<br>　　{n,m} 匹配长度<br>　　. 任何单个字符(. 字符点)<br>　　| 或<br>　　\ 转义<br>　　$ 结尾<br>　　[A-Z] 26个大写字母<br>　　[a-z] 26个小写字母<br>　　[0-9] 0至9数字<br>　　[A-Za-z0-9] 26个大写字母、26个小写字母和0至9数字<br>　　， 分割<br>分割语法：<br>　　[A,H,T,W] 包含A或H或T或W字母<br>　　[a,h,t,w] 包含a或h或t或w字母<br>　　[0,3,6,8] 包含0或3或6或8数字</p>
<p>　　语法与释义：<br>　　基础语法 “^([]{})([]{})([]{})$”<br>　　正则字符串 = “开始（[包含内容]{长度}）（[包含内容]{长度}）（[包含内容]{长度}）结束”<br>　　<br>　　?,<em>,+,\d,\w 这些都是简写的,完全可以用[]和{}代替，在(?:)(?=)(?!)(?&lt;=)(?&lt;!)(?i)(</em>?)(+?)这种特殊组合情况下除外。<br>　　初学者可以忽略?,*,+,\d,\w一些简写标示符，学会了基础使用再按表自己去等价替换。
　　</p>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python　　"></a>Python　　</h2><p>Python 的代码不需要编译。<br>Python 的源码是不能加密的，是一门开源的语言。<br>Python 不需要分号。</p>
<h3 id="Python-的应用："><a href="#Python-的应用：" class="headerlink" title="Python 的应用："></a>Python 的应用：</h3><ul>
<li>YouTube</li>
<li>Instagram</li>
<li>豆瓣</li>
</ul>
<h3 id="Python-的特殊缩进"><a href="#Python-的特殊缩进" class="headerlink" title="Python 的特殊缩进"></a>Python 的特殊缩进</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="number">20</span></span><br><span class="line"><span class="built_in">if</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'your age is'</span>, age)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'adult'</span>)</span><br></pre></td></tr></table></figure>
<p>根据 Python 的缩进规则，两个 print 语句都是属于 if 判断体内的执行语句。</p>
<p>在定义函数的时候也是根据缩进来判断从属关系。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure></p>
<p>从这点来看，Python 代码不会像其他语言那样有各种不同的缩进也没关系，要让 Python 代码跑起来，必须按照它的规则，所以 Python 的代码可以很优雅。</p>
<p>Django 内置了非常多大量的应用，常用的包括：</p>
<ul>
<li>后台管理系统 damin</li>
<li>用户认证系统 auth</li>
<li>会话系统 sessions</li>
</ul>
<h3 id="Django-安装"><a href="#Django-安装" class="headerlink" title="Django 安装"></a>Django 安装</h3><p>UBuntu 下已默认安装 Python 2.7.8 。在终端输入 python 即可进入解释器。但该解释器没有自动补齐的功能，非常不好用，所以推荐安装 iPython 。可以先安装 Python 的包管理器 pip 。</p>
<blockquote>
<p>sudo apt-get install python-pip</p>
</blockquote>
<p>然后再安装 iPython</p>
<blockquote>
<p>sudo pip install ipython</p>
</blockquote>
<p>或直接运行</p>
<blockquote>
<p>sudo apt-get install ipython</p>
</blockquote>
<p>也可安装 iPython 。推荐先安装 pip 。</p>
<p>安装 Django</p>
<blockquote>
<p>sudo pip install django</p>
</blockquote>
<p>接下来就可以启动我们第一个 Django 项目了。</p>
<p>进入到我们创建项目的文件夹，执行</p>
<blockquote>
<p>django-admin startproject test</p>
</blockquote>
<p>test 为自定义的文件夹名称</p>
<p>进入 test 文件夹，发现有个 manage.py</p>
<blockquote>
<p>python manage.py runserver</p>
</blockquote>
<p>即在本机上开起了本地服务器，端口为 8000</p>
<p>本地建立起的文件中</p>
<p>manage.py 用来管理整个项目，包括：数据库的建立、服务器运行、测试等。</p>
<p>运行 python namage.py 可以查看它有哪些服务。</p>
<p>在 test 目录下</p>
<p>settings.py 为配置文件，用来给应用、中间件、数据库、静态目录等进行配置。</p>
<p>urls.py 为 URL 映射配置文件，决定某个 URL 访问被那个函数响应。</p>
<p>wsgi.py 为 Python 应用程序或框架和 Web 服务器之间的接口。</p>
<h3 id="Django-中的应用"><a href="#Django-中的应用" class="headerlink" title="Django 中的应用"></a>Django 中的应用</h3><p>Django 中用应用（app）来分割功能模块。</p>
<p>在之前创建的 test 的基础上，我们执行</p>
<blockquote>
<p>python manage.py startapp blog</p>
</blockquote>
<p>创建 blog 这个应用。</p>
<p>然后在 settings.py 里面将 blog 应用添加进去。</p>
<p>找到 INSTALLED_APPS 并在该元组内末端添加’blog’,即可。</p>
<p>在 blog 文件夹内有许多 .py 文件。</p>
<p>其中 views.py 用来响应客户请求并返回一个 HTML 页面。</p>
<p>models.py 用来定义数据库中的表。</p>
<p>通过修改 views.py 来处理客户的请求并返回 HTML 页面，在里面定义函数：</p>
<blockquote>
<p>def hello(request):<br>    return HttpResponse(‘<html>Hello World!</html>‘) </p>
</blockquote>
<p>由于引用了 http 模块，所以在开头不要忘了引入 http 模块：</p>
<blockquote>
<p>from django.http import HttpResponse</p>
</blockquote>
<p>定义了响应函数，还要在 /test 中的 urls.py 进行映射，打开该文件并在末端找到 urlpatterns ，添加一个对应 hello() 函数的映射：</p>
<blockquote>
<p>url(r’helloworld’,’blog.views.hello’),</p>
</blockquote>
<p>url() 函数中的第一个参数为对应的请求 url 地址，可以通过一个正则表达式来进行匹配。第二个参数为访问该 url 所对应的映射函数，在上面这句话中表示对应 blog 应用中 views 里定义的 hello 函数。</p>
<p>在命令行中输入 </p>
<blockquote>
<p>python manage.py runserver</p>
</blockquote>
<p>在浏览器中访问 <a href="http://localhost:8000/helloworld" target="_blank" rel="noopener">http://localhost:8000/helloworld</a> 即可以看到 Hello World!.</p>
<h3 id="Django-概述"><a href="#Django-概述" class="headerlink" title="Django 概述"></a>Django 概述</h3><p>在上面的例子中 Django 主要通过一下几个配置处理客户的 http 请求：</p>
<p>URL 配置（建立 URL 和响应函数之间的关系）</p>
<ul>
<li>Views 视图层配置（响应客户的 http 请求，进行逻辑处理，返回 HTML 页面给客户）</li>
<li>Models 模型层配置（描述服务器存储的数据）</li>
<li>templates 模板配置（用来生产 HTML 页面。返回给用户的 HTML 是由 Models 和模板渲染出来的）。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-javascript小知识点" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/javascript小知识点/" class="article-date">
  	<time datetime="2015-07-30T11:42:43.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/javascript小知识点/">javascript小知识点</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h2><ul>
<li>中文是合法的标识符，可以用作变量名。</li>
<li>JavaScript有一些保留字，不能用作标识符：arguments、break、case、catch、class、const、continue、debugger、default、delete、do、else、enum、eval、export、extends、false、finally、for、function、if、implements、import、in、instanceof、interface、let、new、null、package、private、protected、public、return、static、super、switch、this、throw、true、try、typeof、var、void、while、with、yield。</li>
<li>Infinity、NaN、undefined虽然不是保留字，但是因为具有特别含义，也不应该用作标识符。</li>
<li>JavaScript的标识名区分大小写，所以undefined和null不同于Undefined和Null（或者其他仅仅大小写不同的词形），后者只是普通的变量名。</li>
</ul>
<h2 id="typeof运算符"><a href="#typeof运算符" class="headerlink" title="typeof运算符"></a>typeof运算符</h2><p>undefined返回undefined    利用这一点，typeof可以用来检查一个没有声明的变量，而不报错。如：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v</span><br><span class="line"><span class="regexp">//</span> ReferenceError: v is not defined</span><br><span class="line">typeof v</span><br><span class="line"><span class="regexp">//</span> <span class="string">"undefined"</span></span><br><span class="line"><span class="regexp">//</span> <span class="string">"undefined"</span></span><br></pre></td></tr></table></figure>
<p>实际编程中，这个特点通常用在判断语句:<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span> 错误的写法：</span><br><span class="line"><span class="keyword">if</span> <span class="params">(v)</span>&#123;</span><br><span class="line">    <span class="string">//</span> <span class="string">...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">//</span> ReferenceError: v is not defined</span><br><span class="line"><span class="string">//</span> 正确的写法：</span><br><span class="line"><span class="keyword">if</span> <span class="params">(typeof <span class="attr">v</span> === "undefined")</span>&#123;</span><br><span class="line">    <span class="string">//</span> <span class="string">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="instanceof运算符"><a href="#instanceof运算符" class="headerlink" title="instanceof运算符"></a>instanceof运算符</h2><p>既然typeof对数组（array）和对象（object）的显示结果都是object，那么怎么区分它们呢？instanceof运算符可以做到:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line">o <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// false</span></span><br><span class="line">a <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Boolean（）"><a href="#Boolean（）" class="headerlink" title="Boolean（）"></a>Boolean（）</h2><p>以下六个值的转化结果为false，其他的值全部为true<br>undefined<br>null<br>-0<br>+0<br>NaN<br>‘’（空字符串）</p>
<blockquote>
<p>Boolean(undefined) // false<br>Boolean(null) // false<br>Boolean(0) // false<br>Boolean(NaN) // false<br>Boolean(‘’) // false</p>
</blockquote>
<h2 id="javascript自动添加分号"><a href="#javascript自动添加分号" class="headerlink" title="javascript自动添加分号"></a>javascript自动添加分号</h2><p>如果一行的起首是“自增”（++）或“自减”（–）运算符，则它们的前面会自动添加分号。<br>如果continue、break、return和throw这四个语句后面，直接跟换行符，则会自动添加分号。这意味着，如果return语句返回的是一个对象的字面量，起首的大括号一定要写在同一行，否则得不到预期结果。</p>
<h2 id="原始类型值的转换规则"><a href="#原始类型值的转换规则" class="headerlink" title="原始类型值的转换规则"></a>原始类型值的转换规则</h2><pre><code>数值：转换后还是原来的值。

字符串：如果可以被解析为数值，则转换为相应的数值，否则得到NaN。空字符串转为0。

布尔值：true转成1，false转成0。

undefined：转成NaN。

null：转成0。
</code></pre><h2 id="Number函数和parseInt函数"><a href="#Number函数和parseInt函数" class="headerlink" title="Number函数和parseInt函数"></a>Number函数和parseInt函数</h2><p>Number函数和parseInt函数区别主要在于parseInt逐个解析字符，而Number函数整体转换字符串的类型。另外，Number会忽略八进制的前导0，而parseInt不会。</p>
<blockquote>
<p>parseInt(‘011’) // 9<br>parseInt(‘42 cats’) // 42<br>parseInt(‘0xcafebabe’) // 3405691582<br>Number(‘011’) // 11<br>Number(‘42 cats’) // NaN<br>Number(‘0xcafebabe’) // 3405691582</p>
</blockquote>
<h2 id="加法运算符"><a href="#加法运算符" class="headerlink" title="加法运算符"></a>加法运算符</h2><p>加法运算符的类型转换，可以分成三种情况讨论:<br>（1）运算子之中存在字符串<br>两个运算子之中，只要有一个是字符串，则另一个不管是什么类型，都会被自动转为字符串，然后执行字符串连接运算<br>（2）两个运算子都为数值或布尔值<br>这种情况下，执行加法运算，布尔值转为数值（true为1，false为0）<br>（3）运算子之中存在对象<br>运算子之中存在对象（或者准确地说，存在非原始类型的值），则先调用该对象的valueOf方法。如果返回结果为原始类型的值，则运用上面两条规则；否则继续调用该对象的toString方法，对其返回值运用上面两条规则。</p>
<blockquote>
<p>1 + {a:1}<br>// “1[object Object]”</p>
</blockquote>
<p>对象{a:1}的valueOf方法，返回的就是这个对象的本身，因此接着对它调用toString方法。({a:1}).toString()默认返回字符串”[object Object]”，所以最终结果就是字符串“1[object Object]”。</p>
<p>有趣的是，如果更换上面代码的运算次序，就会得到不同的值：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="selector-tag">a</span>:<span class="number">1</span>&#125; + <span class="number">1</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p>
<p>原来此时，JavaScript引擎不将{a:1}视为对象，而是视为一个代码块，这个代码块没有返回值，所以被忽略。因此上面的代码，实际上等同于 {a:1};+1 ，所以最终结果就是1。为了避免这种情况，需要对{a:1}加上括号。</p>
<h2 id="版权符号"><a href="#版权符号" class="headerlink" title="版权符号"></a>版权符号</h2><blockquote>
<p>\XXX 用三位八进制数（0到377）代表一些特殊符号，比如\251表示版权符号。<br>\xXX 用两位十六进制数（00到FF）代表一些特殊符号，比如\xA9表示版权符号。<br>\uXXXX 用四位十六进制的Unicode编号代表某个字符，比如\u00A9表示版权符号。</p>
</blockquote>
<h2 id="Object-prototype-toString-call方法"><a href="#Object-prototype-toString-call方法" class="headerlink" title="Object.prototype.toString.call方法"></a>Object.prototype.toString.call方法</h2><blockquote>
<p>Object.prototype.toString.call(2) // “[object Number]”<br>Object.prototype.toString.call(‘’) // “[object String]”<br>Object.prototype.toString.call(true) // “[object Boolean]”<br>Object.prototype.toString.call(undefined) // “[object Undefined]”<br>Object.prototype.toString.call(null) // “[object Null]”<br>Object.prototype.toString.call(Math) // “[object Math]”<br>Object.prototype.toString.call({}) // “[object Object]”<br>Object.prototype.toString.call([]) // “[object Array]”</p>
</blockquote>
<p>可以利用这个特性，写出一个比typeof运算符更准确的类型判断函数：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="class"><span class="keyword">type</span> </span>= function (o)&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="type">Object</span>.prototype.toString.call(o);</span><br><span class="line">        <span class="keyword">return</span> s.<span class="keyword">match</span>(/\[<span class="class"><span class="keyword">object</span> (<span class="params">.*?</span>)<span class="title">\</span>]<span class="title">/</span>)[1].<span class="title">toLowerCase</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">&#123;&#125;</span>)</span>; <span class="comment">// "object"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">[]</span>)</span>; <span class="comment">// "array"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">5</span>)</span>; <span class="comment">// "number"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">null</span>)</span>; <span class="comment">// "null"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params"></span>)</span>; <span class="comment">// "undefined"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">/abcd/</span>)</span>; <span class="comment">// "regex"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">new <span class="type">Date</span>(</span>))</span>; <span class="comment">// "date"</span></span><br></pre></td></tr></table></figure></p>
<p>在上面这个type函数的基础上，还可以加上专门判断某种类型数据的方法:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> [<span class="string">'Null'</span>,</span><br><span class="line"> <span class="string">'Undefined'</span>,</span><br><span class="line"> <span class="string">'Object'</span>,</span><br><span class="line"> <span class="string">'Array'</span>,</span><br><span class="line"> <span class="string">'String'</span>,</span><br><span class="line"> <span class="string">'Number'</span>,</span><br><span class="line"> <span class="string">'Boolean'</span>,</span><br><span class="line"> <span class="string">'Function'</span>,</span><br><span class="line"> <span class="string">'RegExp'</span>,</span><br><span class="line"> <span class="string">'Element'</span>,</span><br><span class="line"> <span class="string">'NaN'</span>,</span><br><span class="line"> <span class="string">'Infinite'</span></span><br><span class="line">].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">type</span>[<span class="string">'is'</span> + t] = <span class="function"><span class="keyword">function</span> (<span class="params">o</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">type</span>(o) === t.toLowerCase();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">type</span>.isObject(&#123;&#125;); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">type</span>.isNumber(<span class="literal">NaN</span>); <span class="comment">// false</span></span><br><span class="line"><span class="keyword">type</span>.isElement(<span class="built_in">document</span>.createElement(<span class="string">'div'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">type</span>.isRegExp(<span class="regexp">/abc/</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Object-defineProperty方法"><a href="#Object-defineProperty方法" class="headerlink" title="Object.defineProperty方法"></a>Object.defineProperty方法</h2><p>Object.defineProperty方法接受三个参数，第一个是属性所在的对象，第二个是属性名（它应该是一个字符串），第三个是属性的描述对象。比如，新建一个o对象，并定义它的p属性，可以这样写：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperty(&#123;&#125;,</span> <span class="string">"p"</span><span class="string">,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        value:</span> <span class="number">123</span><span class="string">,</span></span><br><span class="line"><span class="attr">        writable:</span> <span class="literal">false</span><span class="string">,</span></span><br><span class="line"><span class="attr">        enumerable:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">        configurable:</span> <span class="literal">false</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"><span class="string">o.p</span></span><br><span class="line"><span class="string">//</span> <span class="number">123</span></span><br><span class="line"><span class="string">o.p</span> <span class="string">=</span> <span class="number">246</span><span class="string">;</span></span><br><span class="line"><span class="string">o.p</span></span><br><span class="line"><span class="string">//</span> <span class="number">123</span></span><br><span class="line"><span class="string">//</span> <span class="string">因为writable为false，所以无法改变该属性的值</span></span><br></pre></td></tr></table></figure></p>
<p>如果一次性定义或修改多个属性，可以使用Object.defineProperties方法：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperties(&#123;&#125;,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        p1:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="number">123</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">        p2:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="string">"abc"</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">        p3:</span> <span class="string">&#123;</span> <span class="attr">get:</span> <span class="string">function()</span> <span class="string">&#123;</span> <span class="string">return</span> <span class="string">this.p1+this.p2</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">              enumerable:</span><span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">              configurable:</span><span class="literal">true</span></span><br><span class="line">        <span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"><span class="string">o.p1</span> <span class="string">//</span> <span class="number">123</span></span><br><span class="line"><span class="string">o.p2</span> <span class="string">//</span> <span class="string">"abc"</span></span><br><span class="line"><span class="string">o.p3</span> <span class="string">//</span> <span class="string">"123abc"</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中的p3属性，定义了取值函数get。这时需要注意的是，一旦定义了取值函数get（或存值函数set），就不能将writable设为true，或者同时定义value属性，否则会报错。</p>
<h2 id="Object-getOwnPropertyNames方法"><a href="#Object-getOwnPropertyNames方法" class="headerlink" title="Object.getOwnPropertyNames方法"></a>Object.getOwnPropertyNames方法</h2><p>Object.getOwnPropertyNames方法返回直接定义在某个对象上面的全部属性的名称，而不管该属性是否可枚举。<br>需要注意的是，当使用var命令声明变量时，变量的configurable为false。<br>而不使用var命令声明变量时（或者使用属性赋值的方式声明变量），变量的可配置性为true。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-一周培训心得" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/一周培训心得/" class="article-date">
  	<time datetime="2015-07-30T11:41:31.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/一周培训心得/">一周培训心得</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>使用git可以通过在终端输入git查的一些常用的命令，以下是一些git命令作为记录，方便查看使用：<br>git reset 回退版本<br>git reset –hard HEAD^中上一个版本就是HEAD^，上上一个版本就是HEAD^^，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100<br>git log 查看，git log – pretty=oneline简洁查看<br>git diff HEAD – readme.txt命令可以查看工作区和版本库里面最新版本的区别<br>git checkout – file 可以丢弃工作区的修改（file为所丢弃修改文档名）<br>用rm命令删除工作区的file。   如rm test.txt<br>用命令git rm删掉版本库里的file。 如git rm test.txt<br>使用命令git remote add origin git@server-name:path/repo-name.git可以关联一个远程库<br>关联后，使用命令git push -u origin master第一次推送master分支的所有内容；<br>此后，每次本地提交后，只要有必要，就可以使用命令git push origin master推送最新修改;<br>git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:michaelliao/gitskills.git可以克隆一个本地库<br>git checkout -b dev创建dev分支，加上-b参数表示创建并切换，相当于<br>git branch dev<br>git checkout dev<br>git merge命令用于合并指定分支到当前分支<br>git branch -d dev删除dev分支<br>git log –graph命令可以看到分支合并图<br>git log –graph –pretty=oneline –abbrev-commit查看分支合并情况<br>当写程序过程中需要离开当前写的程序，git还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作<br>git stash list命令查看工作现场<br>需要恢复有两个办法：<br>1.用git stash apply恢复，但是恢复后，stash内容并不删除，你需要用git stash drop来删除；<br>2.用git stash pop，恢复的同时把stash内容也删了<br>可以多次stash，恢复的时候，先用git stash list查看，然后恢复指定的stash，用命令：git stash apply stash@{0}<br>用git remote查看远程仓库的信息<br>用git remote -v可以显示更详细的信息<br>推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：git push origin master。如果要推送其他分支，比如dev，就改成:git push origin dev<br>创建远程origin的dev分支到本地，于是用这个命令创建本地dev分支:git checkout -b dev origin/dev<br>如果推送失败，可能是因为小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用git pull把最新的提交从origin/dev抓下来，然后，在本地合并，解决冲突，再推送<br>如果git pull也失败了，原因是没有指定本地dev分支与远程origin/dev分支的链接，根据提示，设置dev和origin/dev的链接：$ git branch –set-upstream dev origin/dev</p>
<hr>
<h2 id="HTML-amp-CSS"><a href="#HTML-amp-CSS" class="headerlink" title="HTML &amp; CSS"></a>HTML &amp; CSS</h2><h3 id="1-样式分离"><a href="#1-样式分离" class="headerlink" title="1.样式分离"></a>1.样式分离</h3><p>Html代码与Css代码分离，通过样式分离可以方便我们修改，当我们修改了HTML文件后，我们可以不用重新修改CSS文件来适应新的HTML文件。</p>
<h3 id="2-CSS优先级"><a href="#2-CSS优先级" class="headerlink" title="2.CSS优先级"></a>2.CSS优先级</h3><p>优先级逐级增加的选择器列表:<br>    通用选择器<br>    元素(类型)选择器<br>    类选择器<br>    属性选择器<br>    伪类<br>    ID 选择器<br>    内联样式</p>
<h3 id="3-CSS-代码书写规范"><a href="#3-CSS-代码书写规范" class="headerlink" title="3.CSS 代码书写规范"></a>3.CSS 代码书写规范</h3><p>书写顺序：<br>1.位置属性(position, top, right, z-index, display, float等)<br>2.大小(width, height, padding, margin)<br>3.文字系列(font, line-height, letter-spacing, color- text-align等)<br>4.背景(background, border等)<br>5.其他(animation, transition等)</p>
<p>使用CSS缩写，减少代码量：<br>1.CSS有些属性是可以缩写的，比如padding,margin,font等等，这样精简代码同时又能提高用户的阅读体验。<br>2.去掉小数点前的0 如font-size:0.8em改成font-size:.8em</p>
<p>简写命名：navigation –&gt; nav</p>
<p>16进制颜色代码缩写:#eebbcc –&gt; #ebc</p>
<p>连字符CSS选择器命名规范:<br>1.长名称或词组可以使用中横线来为选择器命名。<br>2.不能用“_”下划线来命名CSS选择器，为什么呢？<br>    一些浏览器已经不允许使用下划线来命名CSS选择器（就是不兼容）；<br>    能良好区分JavaScript变量命名.</p>
<p>不要随意使用id:<br>id在JS是唯一的，不能多次使用，而使用class类选择器却可以重复使用，另外id的优先级优先与class，所以id应该按需使用，而不能滥用。    </p>
<p>为选择器添加状态前缀:<br>如.withdrawal –&gt; .iswithdrawal</p>
<p>常用CSS命名规则：<br>头：header<br>内容：content/container<br>尾：footer<br>导航：nav<br>侧栏：sidebar<br>栏目：column<br>页面外围控制整体佈局宽度：wrapper<br>左右中：left right center<br>登录条：loginbar<br>标志：logo<br>广告：banner<br>页面主体：main<br>热点：hot<br>新闻：news<br>下载：download<br>子导航：subnav<br>菜单：menu<br>子菜单：submenu<br>搜索：search<br>友情链接：friendlink<br>页脚：footer<br>版权：copyright<br>滚动：scroll<br>内容：content<br>标签：tags<br>文章列表：list<br>提示信息：msg<br>小技巧：tips<br>栏目标题：title<br>加入：joinus<br>指南：guild<br>服务：service<br>注册：regsiter<br>状态：status<br>投票：vote<br>合作伙伴：partner</p>
<h2 id="JAVASCRIPT"><a href="#JAVASCRIPT" class="headerlink" title="JAVASCRIPT"></a>JAVASCRIPT</h2><p>Javascript是一门单线程的语言。若是按照代码顺序执行，假如有的代码执行消耗的时间长，那么后面的代码得等待它们执行完才能执行，这就造成了效率低下。<br>Javascript的执行机制为了解决它的单线程问题，类似于创建了其他的线程执行代码，当检测到需要耗费时间去执行的代码时，会将这部分代码拉出来单独执行，而主线程继续执行后面的代码，等到主线程执行完后再将拉出去的代码，按照队列一个一个回到主线程执行，这样可以增大运行的效率。</p>
<h2 id="HTML5-amp-CSS3"><a href="#HTML5-amp-CSS3" class="headerlink" title="HTML5 &amp; CSS3"></a>HTML5 &amp; CSS3</h2><h3 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h3><p>HTML5可以实现网页中所需的音频、视频和拖放。<br>可查看 <a href="http://www.w3school.com.cn/html5/" target="_blank" rel="noopener">http://www.w3school.com.cn/html5/</a> 学习</p>
<h3 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h3><p>CSS3引入了Transition，使的原先瞬间变化的东西变得有一个过渡的过程，也就是有了动画的效果，让人看起来更舒服。<br>CSS3可以编写较多的动画效果，自己编写动画执行时间，是美化网页的好工具。<br>可查看 <a href="http://www.w3school.com.cn/css3/index.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/css3/index.asp</a> 学习</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Object对象" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/Object对象/" class="article-date">
  	<time datetime="2015-07-30T11:02:41.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/Object对象/">Object对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Object"><a href="#Object" class="headerlink" title="Object()"></a>Object()</h2><p>Object本身当作工具方法使用时，可以将任意值转为对象。</p>
<blockquote>
<p>Object() // 返回一个空对象<br>Object(undefined) // 返回一个空对象<br>Object(null) // 返回一个空对象<br>Object(1) // 等同于 new Number(1)<br>Object(‘foo’) // 等同于 new String(‘foo’)<br>Object(true) // 等同于 new Boolean(true)<br>Object([]) // 返回原数组<br>Object({}) // 返回原对象<br>Object(function(){}) // 返回原函数</p>
</blockquote>
<p>如果Object函数的参数是一个对象，它总是返回原对象。利用这一点，可以写一个判断变量是否为对象的函数。<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> isObject(<span class="keyword">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span> === Object(<span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Object-keys-，Object-getOwnPropertyNames"><a href="#Object-keys-，Object-getOwnPropertyNames" class="headerlink" title="Object.keys()，Object.getOwnPropertyNames()"></a>Object.keys()，Object.getOwnPropertyNames()</h2><p>Object.keys方法和Object.getOwnPropertyNames方法很相似，一般用来遍历对象的属性。它们的参数都是一个对象，都返回一个数组，该数组的成员都是对象自身的（而不是继承的）所有属性名。它们的区别在于，Object.keys方法只返回可枚举的属性，Object.getOwnPropertyNames方法还返回不可枚举的属性名。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var o = &#123;</span><br><span class="line">    p1: <span class="number">123</span>,</span><br><span class="line">    p2: <span class="number">456</span></span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line">Object.keys(o)</span><br><span class="line"><span class="regexp">//</span> [<span class="string">"p1"</span>, <span class="string">"p2"</span>]</span><br><span class="line"></span><br><span class="line">Object.getOwnPropertyNames(o)</span><br><span class="line"><span class="regexp">//</span> [<span class="string">"p1"</span>, <span class="string">"p2"</span>]</span><br></pre></td></tr></table></figure></p>
<p>涉及不可枚举属性时，就有不一样的结果：<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var a = [<span class="string">"Hello"</span>, <span class="string">"World"</span>];</span><br><span class="line"></span><br><span class="line"><span class="symbol">Object</span>.keys(a) </span><br><span class="line">// [<span class="string">"0"</span>, <span class="string">"1"</span>]</span><br><span class="line"></span><br><span class="line"><span class="symbol">Object</span>.getOwnPropertyNames(a)</span><br><span class="line">// [<span class="string">"0"</span>, <span class="string">"1"</span>, <span class="string">"length"</span>]</span><br></pre></td></tr></table></figure></p>
<p>由于JavaScript没有提供计算对象属性个数的方法，所以可以用这两个方法代替:</p>
<blockquote>
<p>Object.keys(o).length<br>Object.getOwnPropertyNames(o).length</p>
</blockquote>
<p>一般情况下，几乎总是使用Object.keys方法，遍历数组的属性。</p>
<h2 id="Object-observe"><a href="#Object-observe" class="headerlink" title="Object.observe()"></a>Object.observe()</h2><p>Object.observe方法用于观察对象属性的变化:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.observe(o, <span class="function"><span class="keyword">function</span>(<span class="params">changes</span>) </span>&#123;</span><br><span class="line">  changes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">change</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(change.type, change.name, change.oldValue);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.foo = <span class="number">1</span>; <span class="comment">// add, 'foo', undefined</span></span><br><span class="line">o.foo = <span class="number">2</span>; <span class="comment">// update, 'foo', 1</span></span><br><span class="line"><span class="keyword">delete</span> o.foo; <span class="comment">// delete, 'foo', 2</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码表示，通过Object.observe函数，对o对象指定回调函数。一旦o对象的属性出现任何变化，就会调用回调函数，回调函数通过一个参数对象读取o的属性变化的信息。<br>但该方法非常新，只有Chrome浏览器的最新版本才部署。</p>
<h2 id="Object实例对象的方法"><a href="#Object实例对象的方法" class="headerlink" title="Object实例对象的方法"></a>Object实例对象的方法</h2><blockquote>
<p>valueOf()：返回当前对象对应的值。<br>toString()：返回当前对象对应的字符串形式。<br>toLocalString()：返回当前对象对应的本地字符串形式。<br>hasOwnProperty()：判断某个属性是否为当前对象自身的属性，还是继承自原型对象的属性。<br>isPrototypeOf()：判断当前对象是否为另一个对象的原型。<br>propertyIsEnumerable()：判断某个属性是否可枚举。</p>
</blockquote>
<h2 id="Object-prototype-valueOf"><a href="#Object-prototype-valueOf" class="headerlink" title="Object.prototype.valueOf()"></a>Object.prototype.valueOf()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o.valueOf = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">2</span>;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> + o <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>上面代码自定义了o对象的valueOf方法，于是1 + o就得到了3。这种方法就相当于用o.valueOf覆盖Object.prototype.valueOf。</p>
<h2 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString()"></a>Object.prototype.toString()</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o1.toString() <span class="comment">// "[object Object]"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = &#123;a:<span class="number">1</span>&#125;;</span><br><span class="line">o2.toString() <span class="comment">// "[object Object]"</span></span><br></pre></td></tr></table></figure>
<h2 id="toString-的应用：判断数据类型"><a href="#toString-的应用：判断数据类型" class="headerlink" title="toString()的应用：判断数据类型"></a>toString()的应用：判断数据类型</h2><blockquote>
<p>数值：返回[object Number]。<br>字符串：返回[object String]。<br>布尔值：返回[object Boolean]。<br>undefined：返回[object Undefined]。<br>null：返回[object Null]。<br>对象：返回”[object “ + 构造函数的名称 + “]” 。</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(<span class="number">2</span>) <span class="comment">// "[object Number]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(<span class="string">''</span>) <span class="comment">// "[object String]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(true) <span class="comment">// "[object Boolean]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(undefined) <span class="comment">// "[object Undefined]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(null) <span class="comment">// "[object Null]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(Math) <span class="comment">// "[object Math]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>(&#123;&#125;) <span class="comment">// "[object Object]"</span></span><br><span class="line">Object<span class="selector-class">.prototype</span><span class="selector-class">.toString</span><span class="selector-class">.call</span>([]) <span class="comment">// "[object Array]"</span></span><br></pre></td></tr></table></figure>
<p>可以利用这个特性，写出一个比typeof运算符更准确的类型判断函数。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="class"><span class="keyword">type</span> </span>= function (o)&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="type">Object</span>.prototype.toString.call(o);</span><br><span class="line">        <span class="keyword">return</span> s.<span class="keyword">match</span>(/\[<span class="class"><span class="keyword">object</span> (<span class="params">.*?</span>)<span class="title">\</span>]<span class="title">/</span>)[1].<span class="title">toLowerCase</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">&#123;&#125;</span>)</span>; <span class="comment">// "object"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">[]</span>)</span>; <span class="comment">// "array"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">5</span>)</span>; <span class="comment">// "number"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">null</span>)</span>; <span class="comment">// "null"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params"></span>)</span>; <span class="comment">// "undefined"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">/abcd/</span>)</span>; <span class="comment">// "regex"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(<span class="params">new <span class="type">Date</span>(</span>))</span>; <span class="comment">// "date"</span></span><br></pre></td></tr></table></figure></p>
<p>在上面这个type函数的基础上，还可以加上专门判断某种类型数据的方法。<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'Null'</span>,</span><br><span class="line"> <span class="string">'Undefined'</span>,</span><br><span class="line"> <span class="string">'Object'</span>,</span><br><span class="line"> <span class="string">'Array'</span>,</span><br><span class="line"> <span class="string">'String'</span>,</span><br><span class="line"> <span class="string">'Number'</span>,</span><br><span class="line"> <span class="string">'Boolean'</span>,</span><br><span class="line"> <span class="string">'Function'</span>,</span><br><span class="line"> <span class="string">'RegExp'</span>,</span><br><span class="line"> <span class="string">'Element'</span>,</span><br><span class="line"> <span class="string">'NaN'</span>,</span><br><span class="line"> <span class="string">'Infinite'</span></span><br><span class="line">].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">type</span>[<span class="string">'is'</span> + t] = <span class="function"><span class="keyword">function</span> (<span class="params">o</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">type</span>(o) === t.toLowerCase();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span>.isObject(&#123;&#125;); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">type</span>.isNumber(<span class="literal">NaN</span>); <span class="comment">// false</span></span><br><span class="line"><span class="keyword">type</span>.isElement(<span class="built_in">document</span>.createElement(<span class="string">'div'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">type</span>.isRegExp(<span class="regexp">/abc/</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Object-getOwnPropertyDescriptor-amp-amp-属性的attributes对象"><a href="#Object-getOwnPropertyDescriptor-amp-amp-属性的attributes对象" class="headerlink" title="Object.getOwnPropertyDescriptor()&amp;&amp;属性的attributes对象"></a>Object.getOwnPropertyDescriptor()&amp;&amp;属性的attributes对象</h2><p>在JavaScript内部，每个属性都有一个对应的attributes对象，保存该属性的一些元信息。使用Object.getOwnPropertyDescriptor方法，可以读取attributes对象。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">&#123;</span> <span class="attr">p:</span> <span class="string">'a'</span> <span class="string">&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.getOwnPropertyDescriptor(o,</span> <span class="string">'p'</span><span class="string">)</span> </span><br><span class="line"><span class="string">//</span> <span class="string">Object</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="string">"a"</span><span class="string">,</span> </span><br><span class="line"><span class="string">//</span>         <span class="attr">writable:</span> <span class="literal">true</span><span class="string">,</span> </span><br><span class="line"><span class="string">//</span>         <span class="attr">enumerable:</span> <span class="literal">true</span><span class="string">,</span> </span><br><span class="line"><span class="string">//</span>         <span class="attr">configurable:</span> <span class="literal">true</span></span><br><span class="line"><span class="string">//</span> <span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>attributes对象包含如下元信息：</p>
<blockquote>
<p>value：表示该属性的值，默认为undefined。<br>  writable：表示该属性的值（value）是否可以改变，默认为true。<br>  enumerable： 表示该属性是否可枚举，默认为true，也就是该属性会出现在   for…in和Object.keys()等操作中。<br>  configurable：表示“可配置性”，默认为true。如果设为false，表示无法删   除该属性，也不得改变attributes对象（value属性除外），也就是configur   able属性控制了attributes对象的可写性。<br>  get：表示该属性的取值函数（getter），默认为undefined。<br>  set：表示该属性的存值函数（setter），默认为undefined。</p>
</blockquote>
<h2 id="Object-defineProperty-，Object-defineProperties"><a href="#Object-defineProperty-，Object-defineProperties" class="headerlink" title="Object.defineProperty()，Object.defineProperties()"></a>Object.defineProperty()，Object.defineProperties()</h2><p>Object.defineProperty方法允许通过定义attributes对象，来定义或修改一个属性，然后返回修改后的对象。它的格式如下：</p>
<blockquote>
<p>Object.defineProperty(object, propertyName, attributesObject)<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperty(&#123;&#125;,</span> <span class="string">"p"</span><span class="string">,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        value:</span> <span class="number">123</span><span class="string">,</span></span><br><span class="line"><span class="attr">        writable:</span> <span class="literal">false</span><span class="string">,</span></span><br><span class="line"><span class="attr">        enumerable:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">        configurable:</span> <span class="literal">false</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="string">o.p</span></span><br><span class="line"><span class="string">//</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="string">o.p</span> <span class="string">=</span> <span class="number">246</span><span class="string">;</span></span><br><span class="line"><span class="string">o.p</span></span><br><span class="line"><span class="string">//</span> <span class="number">123</span></span><br><span class="line"><span class="string">//</span> <span class="string">因为writable为false，所以无法改变该属性的值</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>如果一次性定义或修改多个属性，可以使用Object.defineProperties方法。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperties(&#123;&#125;,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        p1:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="number">123</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">        p2:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="string">"abc"</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">        p3:</span> <span class="string">&#123;</span> <span class="attr">get:</span> <span class="string">function()</span> <span class="string">&#123;</span> <span class="string">return</span> <span class="string">this.p1+this.p2</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">              enumerable:</span><span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="attr">              configurable:</span><span class="literal">true</span></span><br><span class="line">        <span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="string">o.p1</span> <span class="string">//</span> <span class="number">123</span></span><br><span class="line"><span class="string">o.p2</span> <span class="string">//</span> <span class="string">"abc"</span></span><br><span class="line"><span class="string">o.p3</span> <span class="string">//</span> <span class="string">"123abc"</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中的p3属性，定义了取值函数get。这时需要注意的是，一旦定义了取值函数get（或存值函数set），就不能将writable设为true，或者同时定义value属性，否则会报错。<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">Object.defineProperty(o, <span class="string">"p"</span>, &#123;</span><br><span class="line">    value: <span class="number">123</span>, </span><br><span class="line">    <span class="keyword">get</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">456</span>; &#125; </span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// TypeError: Invalid property. </span></span><br><span class="line"><span class="comment">// A property cannot both have accessors and be writable or have a value,</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码同时定义了get属性和value属性，结果就报错。<br>Object.defineProperty() 和Object.defineProperties() 的第三个参数，是一个属性对象。它的writable、configurable、enumerable这三个属性的默认值都为false。</p>
<h2 id="可枚举性（enumerable）"><a href="#可枚举性（enumerable）" class="headerlink" title="可枚举性（enumerable）"></a>可枚举性（enumerable）</h2><p>如果一个属性的enumerable为false，下面三个操作不会取到该属性。</p>
<ul>
<li>for..in循环</li>
<li>Object.keys方法</li>
<li><p>JSON.stringify方法</p>
<p>enumerable可以用来设置“秘密”属性:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line">o.c = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">'d'</span>, &#123;</span><br><span class="line">  value: <span class="number">4</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.d</span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> key <span class="keyword">in</span> o ) <span class="built_in">console</span>.log( o[key] ); </span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(o)  <span class="comment">// ["a", "b", "c"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o <span class="comment">// =&gt; "&#123;a:1,b:2,c:3&#125;"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面代码中，d属性的enumerable为false，所以一般的遍历操作都无法获取该属性，使得它有点像“秘密”属性，但还是可以直接获取它的值。</p>
<p>至于for…in循环和Object.keys方法的区别，在于前者包括对象继承自原型对象的属性，而后者只包括对象本身的属性。如果需要获取对象自身的所有属性，不管enumerable的值，可以使用Object.getOwnPropertyNames方法。<br><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> car = &#123;</span><br><span class="line">  <span class="attribute">id:</span><span class="string"> 123,</span></span><br><span class="line"><span class="string">  color</span>: red,</span><br><span class="line">  <span class="attribute">owner</span>: <span class="number">12</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> owner = &#123;</span><br><span class="line">  <span class="attribute">id:</span><span class="string"> 12,</span></span><br><span class="line"><span class="string">  name</span>: Javi</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( car, <span class="string">'ownerOb'</span>, &#123;<span class="attribute">value</span>: owner&#125; );</span><br><span class="line">car.ownerOb <span class="comment">// &#123;id:12, name:Javi&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(car) <span class="comment">//  '&#123;id: 123, color: "red", owner: 12&#125;'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，owner对象作为注释，加入car对象。由于ownerOb属性的enumerable为false，所以JSON.stringify最后正式输出car对象时，会忽略ownerOb属性。</p>
<h2 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames()"></a>Object.getOwnPropertyNames()</h2><p>Object.getOwnPropertyNames方法返回直接定义在某个对象上面的全部属性的名称，而不管该属性是否可枚举。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperties(&#123;&#125;,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        p1:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="number">1</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">        p2:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="number">2</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">false</span> <span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.getOwnPropertyNames(o)</span></span><br><span class="line"><span class="string">//</span> <span class="string">["p1",</span> <span class="string">"p2"</span><span class="string">]</span></span><br></pre></td></tr></table></figure></p>
<p>一般来说，系统原生的属性（即非用户自定义的属性）都是不可枚举的。<br>// 比如，数组实例自带length属性是不可枚举的</p>
<blockquote>
<p>Object.keys([]) // []<br>Object.getOwnPropertyNames([]) // [ ‘length’ ]<br>// Object.prototype对象的自带属性也都是不可枚举的<br>Object.keys(Object.prototype) // []<br>Object.getOwnPropertyNames(Object.prototype)<br>// [‘hasOwnProperty’,<br>//  ‘valueOf’,<br>//  ‘constructor’,<br>//  ‘toLocaleString’,<br>//  ‘isPrototypeOf’,<br>//  ‘propertyIsEnumerable’,<br>//  ‘toString’]</p>
</blockquote>
<p>上面代码可以看到，数组的实例对象（[]）没有可枚举属性，不可枚举属性有length；Object.prototype对象也没有可枚举属性，但是有不少不可枚举属性。</p>
<h2 id="Object-prototype-propertyIsEnumerable"><a href="#Object-prototype-propertyIsEnumerable" class="headerlink" title="Object.prototype.propertyIsEnumerable()"></a>Object.prototype.propertyIsEnumerable()</h2><p>判断一个属性是否枚举：<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var <span class="attr">o</span> = &#123;&#125;;</span><br><span class="line">o.<span class="attr">p</span> = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">o.propertyIsEnumerable(<span class="string">"p"</span>) // <span class="literal">true</span></span><br><span class="line">o.propertyIsEnumerable(<span class="string">"toString"</span>) // <span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<h2 id="可配置性（configurable）"><a href="#可配置性（configurable）" class="headerlink" title="可配置性（configurable）"></a>可配置性（configurable）</h2><p>可配置性（configurable）决定了是否可以修改属性的描述对象。也就是说，当configure为false的时候，value、writable、enumerable和configurable都不能被修改了。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperty(&#123;&#125;,</span> <span class="string">'p'</span><span class="string">,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        value:</span> <span class="number">1</span><span class="string">,</span></span><br><span class="line"><span class="attr">        writable:</span> <span class="literal">false</span><span class="string">,</span> </span><br><span class="line"><span class="attr">        enumerable:</span> <span class="literal">false</span><span class="string">,</span> </span><br><span class="line"><span class="attr">        configurable:</span> <span class="literal">false</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.defineProperty(o,'p',</span> <span class="string">&#123;value:</span> <span class="number">2</span><span class="string">&#125;)</span></span><br><span class="line"><span class="string">//</span> <span class="attr">TypeError:</span> <span class="string">Cannot</span> <span class="string">redefine</span> <span class="attr">property:</span> <span class="string">p</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.defineProperty(o,'p',</span> <span class="string">&#123;writable:</span> <span class="literal">true</span><span class="string">&#125;)</span></span><br><span class="line"><span class="string">//</span> <span class="attr">TypeError:</span> <span class="string">Cannot</span> <span class="string">redefine</span> <span class="attr">property:</span> <span class="string">p</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.defineProperty(o,'p',</span> <span class="string">&#123;enumerable:</span> <span class="literal">true</span><span class="string">&#125;)</span></span><br><span class="line"><span class="string">//</span> <span class="attr">TypeError:</span> <span class="string">Cannot</span> <span class="string">redefine</span> <span class="attr">property:</span> <span class="string">p</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.defineProperties(o,'p',&#123;configurable:</span> <span class="literal">true</span><span class="string">&#125;)</span></span><br><span class="line"><span class="string">//</span> <span class="attr">TypeError:</span> <span class="string">Cannot</span> <span class="string">redefine</span> <span class="attr">property:</span> <span class="string">p</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码首先生成对象o，并且定义属性p的configurable为false。然后，逐一改动value、writable、enumerable、configurable，结果都报错。<br>需要注意的是，writable只有在从false改为true会报错，从true改为false则是允许的。<br>至于value，只要writable和configurable有一个为true，就可以改动。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = Object.defineProperty(&#123;&#125;, <span class="string">'p'</span>, &#123;</span><br><span class="line">        <span class="keyword">value</span>: <span class="number">1</span>,</span><br><span class="line">        writable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Object.defineProperty(o1,<span class="string">'p'</span>, &#123;<span class="keyword">value</span>: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="comment">// 修改成功</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = Object.defineProperty(&#123;&#125;, <span class="string">'p'</span>, &#123;</span><br><span class="line">        <span class="keyword">value</span>: <span class="number">1</span>,</span><br><span class="line">        writable: <span class="literal">false</span>,</span><br><span class="line">        configurable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Object.defineProperty(o2,<span class="string">'p'</span>, &#123;<span class="keyword">value</span>: <span class="number">2</span>&#125;) </span><br><span class="line"><span class="comment">// 修改成功</span></span><br></pre></td></tr></table></figure></p>
<p>可配置性决定了一个变量是否可以被删除（delete）。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">Object.defineProperties(&#123;&#125;,</span> <span class="string">&#123;</span></span><br><span class="line"><span class="attr">        p1:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="number">1</span><span class="string">,</span> <span class="attr">configurable:</span> <span class="literal">true</span> <span class="string">&#125;,</span></span><br><span class="line"><span class="attr">        p2:</span> <span class="string">&#123;</span> <span class="attr">value:</span> <span class="number">2</span><span class="string">,</span> <span class="attr">configurable:</span> <span class="literal">false</span> <span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="string">delete</span> <span class="string">o.p1</span> <span class="string">//</span> <span class="literal">true</span></span><br><span class="line"><span class="string">delete</span> <span class="string">o.p2</span> <span class="string">//</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="string">o.p1</span> <span class="string">//</span> <span class="string">undefined</span></span><br><span class="line"><span class="string">o.p2</span> <span class="string">//</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p>当使用var命令声明变量时，变量的configurable为false。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="keyword">this</span>,<span class="string">'a1'</span>)</span><br><span class="line"><span class="comment">// Object &#123;</span></span><br><span class="line"><span class="comment">// value: 1, </span></span><br><span class="line"><span class="comment">// writable: true, </span></span><br><span class="line"><span class="comment">// enumerable: true, </span></span><br><span class="line"><span class="comment">// configurable: false</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>而不使用var命令声明变量时（或者使用属性赋值的方式声明变量），变量的可配置性为true。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">a2</span> <span class="string">=</span> <span class="number">1</span><span class="string">;</span></span><br><span class="line"><span class="string">Object.getOwnPropertyDescriptor(this,'a2')</span></span><br><span class="line"><span class="string">//</span> <span class="string">Object</span> <span class="string">&#123;</span></span><br><span class="line"><span class="string">//</span> <span class="attr">value:</span> <span class="number">1</span><span class="string">,</span> </span><br><span class="line"><span class="string">//</span> <span class="attr">writable:</span> <span class="literal">true</span><span class="string">,</span> </span><br><span class="line"><span class="string">//</span> <span class="attr">enumerable:</span> <span class="literal">true</span><span class="string">,</span> </span><br><span class="line"><span class="string">//</span> <span class="attr">configurable:</span> <span class="literal">true</span></span><br><span class="line"><span class="string">//</span> <span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>// 或者写成<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.a3 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">Object.getOwnPropertyDescriptor(<span class="keyword">this</span>,<span class="string">'a3'</span>)</span><br><span class="line"><span class="comment">// Object &#123;</span></span><br><span class="line"><span class="comment">// value: 1, </span></span><br><span class="line"><span class="comment">// writable: true, </span></span><br><span class="line"><span class="comment">// enumerable: true, </span></span><br><span class="line"><span class="comment">// configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="可写性（writable）"><a href="#可写性（writable）" class="headerlink" title="可写性（writable）"></a>可写性（writable）</h2><p>可写性（writable）决定了属性的值（value）是否可以被改变。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;; </span><br><span class="line"></span><br><span class="line">Object.defineProperty(o, <span class="string">"a"</span>, &#123; <span class="keyword">value</span> : <span class="number">37</span>, writable : <span class="literal">false</span> &#125;);</span><br><span class="line"></span><br><span class="line">o.a <span class="comment">// 37</span></span><br><span class="line">o.a = <span class="number">25</span>;</span><br><span class="line">o.a <span class="comment">// 37</span></span><br></pre></td></tr></table></figure></p>
<p>关于可写性，还有一种特殊情况。就是如果原型对象的某个属性的可写性为false，那么派生对象将无法自定义这个属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> proto = <span class="built_in">Object</span>.defineProperty(&#123;&#125;, <span class="string">'foo'</span>, &#123;</span><br><span class="line">    value: <span class="string">'a'</span>,</span><br><span class="line">    writable: <span class="keyword">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(proto);</span><br><span class="line"></span><br><span class="line">o.foo = <span class="string">'b'</span>;</span><br><span class="line">o.foo <span class="comment">// 'a'</span></span><br></pre></td></tr></table></figure></p>
<p>有一个规避方法，就是通过覆盖attributes对象，绕过这个限制，原因是这种情况下，原型链会被完全忽视。<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(o, <span class="string">'foo'</span>, &#123; value: <span class="string">'b'</span> &#125;);</span><br><span class="line">o.foo <span class="regexp">//</span> <span class="string">'b'</span></span><br></pre></td></tr></table></figure></p>
<h2 id="存取器（accessor）"><a href="#存取器（accessor）" class="headerlink" title="存取器（accessor）"></a>存取器（accessor）</h2><p>除了直接定义以外，属性还可以用存取器（accessor）定义。其中，存值函数称为setter，使用set命令；取值函数称为getter，使用get命令。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">get</span> <span class="title">p</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"getter"</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">set</span> <span class="title">p</span>(<span class="params"><span class="keyword">value</span></span>) </span>&#123;</span><br><span class="line">    console.log(<span class="string">"setter: "</span>+<span class="keyword">value</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>利用存取器，可以实现数据对象与DOM对象的双向绑定。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(user, <span class="string">'name'</span>, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(<span class="string">"foo"</span>).value;</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"foo"</span>).value = newValue;</span><br><span class="line">  &#125;,</span><br><span class="line">  configurable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="控制对象状态"><a href="#控制对象状态" class="headerlink" title="控制对象状态"></a>控制对象状态</h2><p>JavaScript提供了三种方法，精确控制一个对象的读写状态，防止对象被改变。最弱一层的保护是preventExtensions，其次是seal，最强的freeze。</p>
<h3 id="Object-preventExtensions方法"><a href="#Object-preventExtensions方法" class="headerlink" title="Object.preventExtensions方法"></a>Object.preventExtensions方法</h3><p>Object.preventExtensions方法可以使得一个对象无法再添加新的属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(o);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">"p"</span>, &#123; value: <span class="string">"hello"</span> &#125;);</span><br><span class="line"><span class="comment">// TypeError: Cannot define property:p, object is not extensible.</span></span><br><span class="line"></span><br><span class="line">o.p = <span class="number">1</span>;</span><br><span class="line">o.p <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>不过，对于使用了preventExtensions方法的对象，可以用delete命令删除它的现有属性。</p>
<h3 id="Object-isExtensible方法"><a href="#Object-isExtensible方法" class="headerlink" title="Object.isExtensible方法"></a>Object.isExtensible方法</h3><p>Object.isExtensible方法用于检查一个对象是否使用了preventExtensions方法。也就是说，该方法可以用来检查是否可以为一个对象添加属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.isExtensible(o)</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(o);</span><br><span class="line"><span class="built_in">Object</span>.isExtensible(o)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Object-seal方法"><a href="#Object-seal方法" class="headerlink" title="Object.seal方法"></a>Object.seal方法</h3><p>Object.seal方法使得一个对象既无法添加新属性，也无法删除旧属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">p</span>:<span class="string">"hello"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> o.p;</span><br><span class="line">o.p <span class="comment">// "hello"</span></span><br><span class="line"></span><br><span class="line">o.x = <span class="string">'world'</span>;</span><br><span class="line">o.x <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>Object.seal还把现有属性的attributes对象的configurable属性设为false，使得attributes对象不再能改变。<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">var</span> <span class="string">o</span> <span class="string">=</span> <span class="string">&#123;</span> <span class="attr">p:</span> <span class="string">'a'</span> <span class="string">&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">seal方法之前</span></span><br><span class="line"><span class="string">Object.getOwnPropertyDescriptor(o,</span> <span class="string">'p'</span><span class="string">)</span></span><br><span class="line"><span class="string">//</span> <span class="string">Object</span> <span class="string">&#123;value:</span> <span class="string">"a"</span><span class="string">,</span> <span class="attr">writable:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">configurable:</span> <span class="literal">true</span><span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.seal(o);</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">seal方法之后</span></span><br><span class="line"><span class="string">Object.getOwnPropertyDescriptor(o,</span> <span class="string">'p'</span><span class="string">)</span> </span><br><span class="line"><span class="string">//</span> <span class="string">Object</span> <span class="string">&#123;value:</span> <span class="string">"a"</span><span class="string">,</span> <span class="attr">writable:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">enumerable:</span> <span class="literal">true</span><span class="string">,</span> <span class="attr">configurable:</span> <span class="literal">false</span><span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="string">Object.defineProperty(o,</span> <span class="string">'p'</span><span class="string">,</span> <span class="string">&#123;</span> <span class="attr">enumerable:</span> <span class="literal">false</span> <span class="string">&#125;)</span></span><br><span class="line"><span class="string">//</span> <span class="attr">TypeError:</span> <span class="string">Cannot</span> <span class="string">redefine</span> <span class="attr">property:</span> <span class="string">p</span></span><br></pre></td></tr></table></figure></p>
<p>可写性（writable）有点特别。如果writable为false，使用Object.seal方法以后，将无法将其变成true；但是，如果writable为true，依然可以将其变成false。</p>
<p>至于属性对象的value是否可改变，是由writable决定的。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p: <span class="string">'a'</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line">o.p = <span class="string">'b'</span>;</span><br><span class="line">o.p <span class="comment">// 'b'</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Object-isSealed方法"><a href="#Object-isSealed方法" class="headerlink" title="Object.isSealed方法"></a>Object.isSealed方法</h3><p>Object.isSealed方法用于检查一个对象是否使用了Object.seal方法。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p: <span class="string">'a'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line"><span class="built_in">Object</span>.isSealed(o) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Object-freeze方法"><a href="#Object-freeze方法" class="headerlink" title="Object.freeze方法"></a>Object.freeze方法</h3><p>Object.freeze方法可以使得一个对象无法添加新属性、无法删除旧属性、也无法改变属性的值，使得这个对象实际上变成了常量。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;p:<span class="string">"hello"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze(o);</span><br><span class="line"></span><br><span class="line">o.p = <span class="string">"world"</span>;</span><br><span class="line">o.p <span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line">o.t = <span class="string">"hello"</span>;</span><br><span class="line">o.t <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Object-isFrozen方法"><a href="#Object-isFrozen方法" class="headerlink" title="Object.isFrozen方法"></a>Object.isFrozen方法</h3><p>Object.isFrozen方法用于检查一个对象是否使用了Object.freeze()方法。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;p:<span class="string">"hello"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze(o);</span><br><span class="line"><span class="built_in">Object</span>.isFrozen(o) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>需要注意的是，使用上面这些方法锁定对象的可写性，但是依然可以通过改变该对象的原型对象，来为它增加属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(o);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proto = <span class="built_in">Object</span>.getPrototypeOf(o);</span><br><span class="line"></span><br><span class="line">proto.t = <span class="string">"hello"</span>;</span><br><span class="line"></span><br><span class="line">o.t</span><br><span class="line"><span class="comment">// hello</span></span><br></pre></td></tr></table></figure></p>
<p>一种解决方案是，把原型也冻结住。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.seal(</span><br><span class="line">            <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.freeze(&#123;x:<span class="number">1</span>&#125;),</span><br><span class="line">                &#123;y: &#123;value: <span class="number">2</span>, writable: <span class="keyword">true</span>&#125;&#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(o).t = <span class="string">"hello"</span>;</span><br><span class="line">o.hello <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2019 Jacy
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>