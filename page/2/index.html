<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Jacy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Jacy">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Jacy">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jacy">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Jacy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.gif">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xl01i.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Jacy</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://d.weibo.com/" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="http://www.163.com/rss/" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/#signin" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/娱乐/" style="font-size: 15px;">娱乐</a> <a href="/tags/娱乐-经验/" style="font-size: 10px;">娱乐+经验</a> <a href="/tags/经验/" style="font-size: 20px;">经验</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://huangweijie.github.io/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">慢慢前行。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Jacy</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7xl01i.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Jacy</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://d.weibo.com/" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="http://www.163.com/rss/" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/#signin" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-javascript小知识点" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/javascript小知识点/" class="article-date">
  	<time datetime="2015-07-30T11:42:43.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/javascript小知识点/">javascript小知识点</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###标识符</p>
<ul>
<li>中文是合法的标识符，可以用作变量名。</li>
<li>JavaScript有一些保留字，不能用作标识符：arguments、break、case、catch、class、const、continue、debugger、default、delete、do、else、enum、eval、export、extends、false、finally、for、function、if、implements、import、in、instanceof、interface、let、new、null、package、private、protected、public、return、static、super、switch、this、throw、true、try、typeof、var、void、while、with、yield。</li>
<li>Infinity、NaN、undefined虽然不是保留字，但是因为具有特别含义，也不应该用作标识符。</li>
<li>JavaScript的标识名区分大小写，所以undefined和null不同于Undefined和Null（或者其他仅仅大小写不同的词形），后者只是普通的变量名。</li>
</ul>
<p>###typeof运算符<br>undefined返回undefined    利用这一点，typeof可以用来检查一个没有声明的变量，而不报错。如：</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v</span><br><span class="line"><span class="regexp">//</span> <span class="attribute">ReferenceError</span>: v <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line"><span class="keyword">typeof</span> v</span><br><span class="line"><span class="regexp">//</span> <span class="string">"undefined"</span></span><br><span class="line"><span class="regexp">//</span> <span class="string">"undefined"</span></span><br></pre></td></tr></table></figure>
<p>实际编程中，这个特点通常用在判断语句:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误的写法：</span></span><br><span class="line"><span class="tag">if</span> (v)&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ReferenceError: v is not defined</span></span><br><span class="line"><span class="comment">// 正确的写法：</span></span><br><span class="line"><span class="tag">if</span> (typeof v === <span class="string">"undefined"</span>)&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###instanceof运算符<br>既然typeof对数组（array）和对象（object）的显示结果都是object，那么怎么区分它们呢？instanceof运算符可以做到:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line">o <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// false</span></span><br><span class="line">a <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>###Boolean（）<br>以下六个值的转化结果为false，其他的值全部为true<br>undefined<br>null<br>-0<br>+0<br>NaN<br>‘’（空字符串）</p>
<blockquote>
<p>Boolean(undefined) // false<br>Boolean(null) // false<br>Boolean(0) // false<br>Boolean(NaN) // false<br>Boolean(‘’) // false</p>
</blockquote>
<p>###javascript自动添加分号<br>如果一行的起首是“自增”（++）或“自减”（–）运算符，则它们的前面会自动添加分号。<br>如果continue、break、return和throw这四个语句后面，直接跟换行符，则会自动添加分号。这意味着，如果return语句返回的是一个对象的字面量，起首的大括号一定要写在同一行，否则得不到预期结果。</p>
<p>###原始类型值的转换规则<br>    数值：转换后还是原来的值。</p>
<pre><code>字符串：如果可以被解析为数值，则转换为相应的数值，否则得到NaN。空字符串转为<span class="number">0</span>。

布尔值：<span class="literal">true</span>转成<span class="number">1</span>，<span class="literal">false</span>转成<span class="number">0</span>。

undefined：转成NaN。

null：转成<span class="number">0</span>。
</code></pre><p>###Number函数和parseInt函数<br>Number函数和parseInt函数区别主要在于parseInt逐个解析字符，而Number函数整体转换字符串的类型。另外，Number会忽略八进制的前导0，而parseInt不会。</p>
<blockquote>
<p>parseInt(‘011’) // 9<br>parseInt(‘42 cats’) // 42<br>parseInt(‘0xcafebabe’) // 3405691582<br>Number(‘011’) // 11<br>Number(‘42 cats’) // NaN<br>Number(‘0xcafebabe’) // 3405691582</p>
</blockquote>
<p>###加法运算符<br>加法运算符的类型转换，可以分成三种情况讨论:<br>（1）运算子之中存在字符串<br>两个运算子之中，只要有一个是字符串，则另一个不管是什么类型，都会被自动转为字符串，然后执行字符串连接运算<br>（2）两个运算子都为数值或布尔值<br>这种情况下，执行加法运算，布尔值转为数值（true为1，false为0）<br>（3）运算子之中存在对象<br>运算子之中存在对象（或者准确地说，存在非原始类型的值），则先调用该对象的valueOf方法。如果返回结果为原始类型的值，则运用上面两条规则；否则继续调用该对象的toString方法，对其返回值运用上面两条规则。</p>
<blockquote>
<p>1 + {a:1}<br>// “1[object Object]”</p>
</blockquote>
<p>对象{a:1}的valueOf方法，返回的就是这个对象的本身，因此接着对它调用toString方法。({a:1}).toString()默认返回字符串”[object Object]”，所以最终结果就是字符串“1[object Object]”。</p>
<p>有趣的是，如果更换上面代码的运算次序，就会得到不同的值：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;a:<span class="number">1</span>&#125; + <span class="number">1</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure></p>
<p>原来此时，JavaScript引擎不将{a:1}视为对象，而是视为一个代码块，这个代码块没有返回值，所以被忽略。因此上面的代码，实际上等同于 {a:1};+1 ，所以最终结果就是1。为了避免这种情况，需要对{a:1}加上括号。</p>
<p>###版权符号</p>
<blockquote>
<p>\XXX 用三位八进制数（0到377）代表一些特殊符号，比如\251表示版权符号。<br>\xXX 用两位十六进制数（00到FF）代表一些特殊符号，比如\xA9表示版权符号。<br>\uXXXX 用四位十六进制的Unicode编号代表某个字符，比如\u00A9表示版权符号。</p>
</blockquote>
<p>###Object.prototype.toString.call方法</p>
<blockquote>
<p>Object.prototype.toString.call(2) // “[object Number]”<br>Object.prototype.toString.call(‘’) // “[object String]”<br>Object.prototype.toString.call(true) // “[object Boolean]”<br>Object.prototype.toString.call(undefined) // “[object Undefined]”<br>Object.prototype.toString.call(null) // “[object Null]”<br>Object.prototype.toString.call(Math) // “[object Math]”<br>Object.prototype.toString.call({}) // “[object Object]”<br>Object.prototype.toString.call([]) // “[object Array]”</p>
</blockquote>
<p>可以利用这个特性，写出一个比typeof运算符更准确的类型判断函数：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="class"><span class="keyword">type</span> =</span> function (o)&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="type">Object</span>.prototype.toString.call(o);</span><br><span class="line">        <span class="keyword">return</span> s.<span class="keyword">match</span>(/\[<span class="class"><span class="keyword">object</span> (</span>.*?)\]/)[<span class="number">1</span>].toLowerCase();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>&#123;&#125;); <span class="comment">// "object"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>[]); <span class="comment">// "array"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span><span class="number">5</span>); <span class="comment">// "number"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span><span class="literal">null</span>); <span class="comment">// "null"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>); <span class="comment">// "undefined"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>/abcd/); <span class="comment">// "regex"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span><span class="keyword">new</span> <span class="type">Date</span>()); <span class="comment">// "date"</span></span><br></pre></td></tr></table></figure></p>
<p>在上面这个type函数的基础上，还可以加上专门判断某种类型数据的方法:<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> [<span class="string">'Null'</span>,</span><br><span class="line"> <span class="string">'Undefined'</span>,</span><br><span class="line"> <span class="string">'Object'</span>,</span><br><span class="line"> <span class="string">'Array'</span>,</span><br><span class="line"> <span class="string">'String'</span>,</span><br><span class="line"> <span class="string">'Number'</span>,</span><br><span class="line"> <span class="string">'Boolean'</span>,</span><br><span class="line"> <span class="string">'Function'</span>,</span><br><span class="line"> <span class="string">'RegExp'</span>,</span><br><span class="line"> <span class="string">'Element'</span>,</span><br><span class="line"> <span class="string">'NaN'</span>,</span><br><span class="line"> <span class="string">'Infinite'</span></span><br><span class="line">].forEach(<span class="function"><span class="keyword">function</span> <span class="params">(t)</span></span> &#123;</span><br><span class="line">    <span class="built_in">type</span>[<span class="string">'is'</span> + t] = <span class="function"><span class="keyword">function</span> <span class="params">(o)</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">type</span>(o) === t.toLowerCase();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">type</span>.isObject(&#123;&#125;); // <span class="keyword">true</span></span><br><span class="line"><span class="built_in">type</span>.isNumber(NaN); // <span class="keyword">false</span></span><br><span class="line"><span class="built_in">type</span>.isElement(document.createElement(<span class="string">'div'</span>)); // <span class="keyword">true</span></span><br><span class="line"><span class="built_in">type</span>.isRegExp(/abc/); // <span class="keyword">true</span></span><br></pre></td></tr></table></figure></p>
<p>###Object.defineProperty方法<br>Object.defineProperty方法接受三个参数，第一个是属性所在的对象，第二个是属性名（它应该是一个字符串），第三个是属性的描述对象。比如，新建一个o对象，并定义它的p属性，可以这样写：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var o = Object.defineProperty(&#123;&#125;, <span class="string">"p"</span>, &#123;</span><br><span class="line">        value: <span class="number">123</span>,</span><br><span class="line">        writable: <span class="literal">false</span>,</span><br><span class="line">        enumerable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line">o.p</span><br><span class="line"><span class="comment">// 123</span></span><br><span class="line">o.p = <span class="number">246</span>;</span><br><span class="line">o.p</span><br><span class="line"><span class="comment">// 123</span></span><br><span class="line"><span class="comment">// 因为writable为false，所以无法改变该属性的值</span></span><br></pre></td></tr></table></figure></p>
<p>如果一次性定义或修改多个属性，可以使用Object.defineProperties方法：<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = Object.defineProperties(&#123;&#125;, &#123;</span><br><span class="line">        p1: &#123; value: <span class="number">123</span>, enumerable: <span class="literal">true</span> &#125;,</span><br><span class="line">        p2: &#123; value: <span class="string">"abc"</span>, enumerable: <span class="literal">true</span> &#125;,</span><br><span class="line">        p3: &#123; <span class="keyword">get</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.p1+<span class="keyword">this</span>.p2 &#125;,</span><br><span class="line">              enumerable:<span class="literal">true</span>,</span><br><span class="line">              configurable:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line">o.p1 <span class="comment">// 123</span></span><br><span class="line">o.p2 <span class="comment">// "abc"</span></span><br><span class="line">o.p3 <span class="comment">// "123abc"</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中的p3属性，定义了取值函数get。这时需要注意的是，一旦定义了取值函数get（或存值函数set），就不能将writable设为true，或者同时定义value属性，否则会报错。</p>
<p>###Object.getOwnPropertyNames方法<br>Object.getOwnPropertyNames方法返回直接定义在某个对象上面的全部属性的名称，而不管该属性是否可枚举。<br>需要注意的是，当使用var命令声明变量时，变量的configurable为false。<br>而不使用var命令声明变量时（或者使用属性赋值的方式声明变量），变量的可配置性为true。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-一周培训心得" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/一周培训心得/" class="article-date">
  	<time datetime="2015-07-30T11:41:31.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/一周培训心得/">一周培训心得</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##Git<br>使用git可以通过在终端输入git查的一些常用的命令，以下是一些git命令作为记录，方便查看使用：<br>git reset 回退版本<br>git reset –hard HEAD^中上一个版本就是HEAD^，上上一个版本就是HEAD^^，当然往上100个版本写100个^比较容易数不过来，所以写成HEAD~100<br>git log 查看，git log – pretty=oneline简洁查看<br>git diff HEAD – readme.txt命令可以查看工作区和版本库里面最新版本的区别<br>git checkout – file 可以丢弃工作区的修改（file为所丢弃修改文档名）<br>用rm命令删除工作区的file。   如rm test.txt<br>用命令git rm删掉版本库里的file。 如git rm test.txt<br>使用命令git remote add origin git@server-name:path/repo-name.git可以关联一个远程库<br>关联后，使用命令git push -u origin master第一次推送master分支的所有内容；<br>此后，每次本地提交后，只要有必要，就可以使用命令git push origin master推送最新修改;<br>git clone git@github.com:michaelliao/gitskills.git可以克隆一个本地库<br>git checkout -b dev创建dev分支，加上-b参数表示创建并切换，相当于<br>git branch dev<br>git checkout dev<br>git merge命令用于合并指定分支到当前分支<br>git branch -d dev删除dev分支<br>git log –graph命令可以看到分支合并图<br>git log –graph –pretty=oneline –abbrev-commit查看分支合并情况<br>当写程序过程中需要离开当前写的程序，git还提供了一个stash功能，可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作<br>git stash list命令查看工作现场<br>需要恢复有两个办法：<br>1.用git stash apply恢复，但是恢复后，stash内容并不删除，你需要用git stash drop来删除；<br>2.用git stash pop，恢复的同时把stash内容也删了<br>可以多次stash，恢复的时候，先用git stash list查看，然后恢复指定的stash，用命令：git stash apply stash@{0}<br>用git remote查看远程仓库的信息<br>用git remote -v可以显示更详细的信息<br>推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：git push origin master。如果要推送其他分支，比如dev，就改成:git push origin dev<br>创建远程origin的dev分支到本地，于是用这个命令创建本地dev分支:git checkout -b dev origin/dev<br>如果推送失败，可能是因为小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用git pull把最新的提交从origin/dev抓下来，然后，在本地合并，解决冲突，再推送<br>如果git pull也失败了，原因是没有指定本地dev分支与远程origin/dev分支的链接，根据提示，设置dev和origin/dev的链接：$ git branch –set-upstream dev origin/dev</p>
<hr>
<p>##HTML &amp; CSS</p>
<p>###1.样式分离<br>Html代码与Css代码分离，通过样式分离可以方便我们修改，当我们修改了HTML文件后，我们可以不用重新修改CSS文件来适应新的HTML文件。</p>
<p>###2.CSS优先级<br>优先级逐级增加的选择器列表:<br>    通用选择器<br>    元素(类型)选择器<br>    类选择器<br>    属性选择器<br>    伪类<br>    ID 选择器<br>    内联样式</p>
<p>###3.CSS 代码书写规范<br>书写顺序：<br>1.位置属性(position, top, right, z-index, display, float等)<br>2.大小(width, height, padding, margin)<br>3.文字系列(font, line-height, letter-spacing, color- text-align等)<br>4.背景(background, border等)<br>5.其他(animation, transition等)</p>
<p>使用CSS缩写，减少代码量：<br>1.CSS有些属性是可以缩写的，比如padding,margin,font等等，这样精简代码同时又能提高用户的阅读体验。<br>2.去掉小数点前的0 如font-size:0.8em改成font-size:.8em</p>
<p>简写命名：navigation –&gt; nav</p>
<p>16进制颜色代码缩写:#eebbcc –&gt; #ebc</p>
<p>连字符CSS选择器命名规范:<br>1.长名称或词组可以使用中横线来为选择器命名。<br>2.不能用“_”下划线来命名CSS选择器，为什么呢？<br>    一些浏览器已经不允许使用下划线来命名CSS选择器（就是不兼容）；<br>    能良好区分JavaScript变量命名.</p>
<p>不要随意使用id:<br>id在JS是唯一的，不能多次使用，而使用class类选择器却可以重复使用，另外id的优先级优先与class，所以id应该按需使用，而不能滥用。    </p>
<p>为选择器添加状态前缀:<br>如.withdrawal –&gt; .iswithdrawal</p>
<p>常用CSS命名规则：<br>头：header<br>内容：content/container<br>尾：footer<br>导航：nav<br>侧栏：sidebar<br>栏目：column<br>页面外围控制整体佈局宽度：wrapper<br>左右中：left right center<br>登录条：loginbar<br>标志：logo<br>广告：banner<br>页面主体：main<br>热点：hot<br>新闻：news<br>下载：download<br>子导航：subnav<br>菜单：menu<br>子菜单：submenu<br>搜索：search<br>友情链接：friendlink<br>页脚：footer<br>版权：copyright<br>滚动：scroll<br>内容：content<br>标签：tags<br>文章列表：list<br>提示信息：msg<br>小技巧：tips<br>栏目标题：title<br>加入：joinus<br>指南：guild<br>服务：service<br>注册：regsiter<br>状态：status<br>投票：vote<br>合作伙伴：partner</p>
<p>##JAVASCRIPT<br>Javascript是一门单线程的语言。若是按照代码顺序执行，假如有的代码执行消耗的时间长，那么后面的代码得等待它们执行完才能执行，这就造成了效率低下。<br>Javascript的执行机制为了解决它的单线程问题，类似于创建了其他的线程执行代码，当检测到需要耗费时间去执行的代码时，会将这部分代码拉出来单独执行，而主线程继续执行后面的代码，等到主线程执行完后再将拉出去的代码，按照队列一个一个回到主线程执行，这样可以增大运行的效率。</p>
<p>##HTML5 &amp; CSS3</p>
<p>###HTML5<br>HTML5可以实现网页中所需的音频、视频和拖放。<br>可查看 <a href="http://www.w3school.com.cn/html5/" target="_blank" rel="external">http://www.w3school.com.cn/html5/</a> 学习</p>
<p>###CSS3<br>CSS3引入了Transition，使的原先瞬间变化的东西变得有一个过渡的过程，也就是有了动画的效果，让人看起来更舒服。<br>CSS3可以编写较多的动画效果，自己编写动画执行时间，是美化网页的好工具。<br>可查看 <a href="http://www.w3school.com.cn/css3/index.asp" target="_blank" rel="external">http://www.w3school.com.cn/css3/index.asp</a> 学习</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Object对象" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/30/Object对象/" class="article-date">
  	<time datetime="2015-07-30T11:02:41.000Z" itemprop="datePublished">2015-07-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/30/Object对象/">Object对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###Object()<br>Object本身当作工具方法使用时，可以将任意值转为对象。</p>
<blockquote>
<p>Object() // 返回一个空对象<br>Object(undefined) // 返回一个空对象<br>Object(null) // 返回一个空对象<br>Object(1) // 等同于 new Number(1)<br>Object(‘foo’) // 等同于 new String(‘foo’)<br>Object(true) // 等同于 new Boolean(true)<br>Object([]) // 返回原数组<br>Object({}) // 返回原对象<br>Object(function(){}) // 返回原函数</p>
</blockquote>
<p>如果Object函数的参数是一个对象，它总是返回原对象。利用这一点，可以写一个判断变量是否为对象的函数。<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> isObject(<span class="keyword">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span> === Object(<span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###Object.keys()，Object.getOwnPropertyNames()<br>Object.keys方法和Object.getOwnPropertyNames方法很相似，一般用来遍历对象的属性。它们的参数都是一个对象，都返回一个数组，该数组的成员都是对象自身的（而不是继承的）所有属性名。它们的区别在于，Object.keys方法只返回可枚举的属性，Object.getOwnPropertyNames方法还返回不可枚举的属性名。<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="atom">var</span> <span class="atom">o</span> = &#123;</span><br><span class="line">    <span class="atom">p1</span>: <span class="number">123</span>,</span><br><span class="line">    <span class="atom">p2</span>: <span class="number">456</span></span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"><span class="name">Object</span>.<span class="atom">keys</span>(<span class="atom">o</span>)</span><br><span class="line">// [<span class="string">"p1"</span>, <span class="string">"p2"</span>]</span><br><span class="line"></span><br><span class="line"><span class="name">Object</span>.<span class="atom">getOwnPropertyNames</span>(<span class="atom">o</span>)</span><br><span class="line">// [<span class="string">"p1"</span>, <span class="string">"p2"</span>]</span><br></pre></td></tr></table></figure></p>
<p>涉及不可枚举属性时，就有不一样的结果：<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var <span class="literal">a</span> = [<span class="string">"Hello"</span>, <span class="string">"World"</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Object.keys(<span class="literal">a</span>) </span><br><span class="line">// [<span class="string">"0"</span>, <span class="string">"1"</span>]</span><br><span class="line"></span><br><span class="line">Object.getOwnPropertyNames(<span class="literal">a</span>)</span><br><span class="line">// [<span class="string">"0"</span>, <span class="string">"1"</span>, <span class="string">"length"</span>]</span><br></pre></td></tr></table></figure></p>
<p>由于JavaScript没有提供计算对象属性个数的方法，所以可以用这两个方法代替:</p>
<blockquote>
<p>Object.keys(o).length<br>Object.getOwnPropertyNames(o).length</p>
</blockquote>
<p>一般情况下，几乎总是使用Object.keys方法，遍历数组的属性。</p>
<p>###Object.observe()<br>Object.observe方法用于观察对象属性的变化:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">Object.observe(o, function(changes) &#123;</span><br><span class="line">  changes.forEach(function(<span class="operator"><span class="keyword">change</span>) &#123;</span><br><span class="line">    console.<span class="keyword">log</span>(<span class="keyword">change</span>.<span class="keyword">type</span>, <span class="keyword">change</span>.<span class="keyword">name</span>, <span class="keyword">change</span>.oldValue);</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.foo = 1; // add, 'foo', undefined</span><br><span class="line">o.foo = 2; // <span class="operator"><span class="keyword">update</span>, <span class="string">'foo'</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">delete</span> o.foo;</span> // <span class="operator"><span class="keyword">delete</span>, <span class="string">'foo'</span>, <span class="number">2</span></span></span><br></pre></td></tr></table></figure></p>
<p>上面代码表示，通过Object.observe函数，对o对象指定回调函数。一旦o对象的属性出现任何变化，就会调用回调函数，回调函数通过一个参数对象读取o的属性变化的信息。<br>但该方法非常新，只有Chrome浏览器的最新版本才部署。</p>
<p>###Object实例对象的方法</p>
<blockquote>
<p>valueOf()：返回当前对象对应的值。<br>toString()：返回当前对象对应的字符串形式。<br>toLocalString()：返回当前对象对应的本地字符串形式。<br>hasOwnProperty()：判断某个属性是否为当前对象自身的属性，还是继承自原型对象的属性。<br>isPrototypeOf()：判断当前对象是否为另一个对象的原型。<br>propertyIsEnumerable()：判断某个属性是否可枚举。</p>
</blockquote>
<p>###Object.prototype.valueOf()<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">o.valueOf = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">2</span>;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> + o <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码自定义了o对象的valueOf方法，于是1 + o就得到了3。这种方法就相当于用o.valueOf覆盖Object.prototype.valueOf。</p>
<p>###Object.prototype.toString()<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> <span class="type">Object</span>();</span><br><span class="line">o1.<span class="built_in">toString</span>() <span class="comment">// "[object Object]"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = &#123;a:<span class="number">1</span>&#125;;</span><br><span class="line">o2.<span class="built_in">toString</span>() <span class="comment">// "[object Object]"</span></span><br></pre></td></tr></table></figure></p>
<p>###toString()的应用：判断数据类型</p>
<blockquote>
<p>数值：返回[object Number]。<br>字符串：返回[object String]。<br>布尔值：返回[object Boolean]。<br>undefined：返回[object Undefined]。<br>null：返回[object Null]。<br>对象：返回”[object “ + 构造函数的名称 + “]” 。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">2</span>) <span class="comment">// "[object Number]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">''</span>) <span class="comment">// "[object String]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>) <span class="comment">// "[object Boolean]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>) <span class="comment">// "[object Undefined]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>) <span class="comment">// "[object Null]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Math</span>) <span class="comment">// "[object Math]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;) <span class="comment">// "[object Object]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([]) <span class="comment">// "[object Array]"</span></span><br></pre></td></tr></table></figure>
<p>可以利用这个特性，写出一个比typeof运算符更准确的类型判断函数。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="class"><span class="keyword">type</span> =</span> function (o)&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="type">Object</span>.prototype.toString.call(o);</span><br><span class="line">        <span class="keyword">return</span> s.<span class="keyword">match</span>(/\[<span class="class"><span class="keyword">object</span> (</span>.*?)\]/)[<span class="number">1</span>].toLowerCase();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>&#123;&#125;); <span class="comment">// "object"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>[]); <span class="comment">// "array"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span><span class="number">5</span>); <span class="comment">// "number"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span><span class="literal">null</span>); <span class="comment">// "null"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>); <span class="comment">// "undefined"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span>/abcd/); <span class="comment">// "regex"</span></span><br><span class="line"><span class="class"><span class="keyword">type</span>(</span><span class="keyword">new</span> <span class="type">Date</span>()); <span class="comment">// "date"</span></span><br></pre></td></tr></table></figure></p>
<p>在上面这个type函数的基础上，还可以加上专门判断某种类型数据的方法。<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'Null'</span>,</span><br><span class="line"> <span class="string">'Undefined'</span>,</span><br><span class="line"> <span class="string">'Object'</span>,</span><br><span class="line"> <span class="string">'Array'</span>,</span><br><span class="line"> <span class="string">'String'</span>,</span><br><span class="line"> <span class="string">'Number'</span>,</span><br><span class="line"> <span class="string">'Boolean'</span>,</span><br><span class="line"> <span class="string">'Function'</span>,</span><br><span class="line"> <span class="string">'RegExp'</span>,</span><br><span class="line"> <span class="string">'Element'</span>,</span><br><span class="line"> <span class="string">'NaN'</span>,</span><br><span class="line"> <span class="string">'Infinite'</span></span><br><span class="line">].forEach(<span class="function"><span class="keyword">function</span> <span class="params">(t)</span></span> &#123;</span><br><span class="line">    <span class="built_in">type</span>[<span class="string">'is'</span> + t] = <span class="function"><span class="keyword">function</span> <span class="params">(o)</span></span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">type</span>(o) === t.toLowerCase();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span>.isObject(&#123;&#125;); // <span class="keyword">true</span></span><br><span class="line"><span class="built_in">type</span>.isNumber(NaN); // <span class="keyword">false</span></span><br><span class="line"><span class="built_in">type</span>.isElement(document.createElement(<span class="string">'div'</span>)); // <span class="keyword">true</span></span><br><span class="line"><span class="built_in">type</span>.isRegExp(/abc/); // <span class="keyword">true</span></span><br></pre></td></tr></table></figure></p>
<p>###Object.getOwnPropertyDescriptor()&amp;&amp;属性的attributes对象<br>在JavaScript内部，每个属性都有一个对应的attributes对象，保存该属性的一些元信息。使用Object.getOwnPropertyDescriptor方法，可以读取attributes对象。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p: <span class="string">'a'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(o, <span class="string">'p'</span>) </span><br><span class="line"><span class="comment">// Object &#123; value: "a", </span></span><br><span class="line"><span class="comment">//         writable: true, </span></span><br><span class="line"><span class="comment">//         enumerable: true, </span></span><br><span class="line"><span class="comment">//         configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>attributes对象包含如下元信息：</p>
<blockquote>
<p>value：表示该属性的值，默认为undefined。<br>  writable：表示该属性的值（value）是否可以改变，默认为true。<br>  enumerable： 表示该属性是否可枚举，默认为true，也就是该属性会出现在   for…in和Object.keys()等操作中。<br>  configurable：表示“可配置性”，默认为true。如果设为false，表示无法删   除该属性，也不得改变attributes对象（value属性除外），也就是configur   able属性控制了attributes对象的可写性。<br>  get：表示该属性的取值函数（getter），默认为undefined。<br>  set：表示该属性的存值函数（setter），默认为undefined。</p>
</blockquote>
<p>###Object.defineProperty()，Object.defineProperties()<br>Object.defineProperty方法允许通过定义attributes对象，来定义或修改一个属性，然后返回修改后的对象。它的格式如下：</p>
<blockquote>
<p>Object.defineProperty(object, propertyName, attributesObject)<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var o = Object.defineProperty(&#123;&#125;, <span class="string">"p"</span>, &#123;</span><br><span class="line">        value: <span class="number">123</span>,</span><br><span class="line">        writable: <span class="literal">false</span>,</span><br><span class="line">        enumerable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.p</span><br><span class="line"><span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line">o.p = <span class="number">246</span>;</span><br><span class="line">o.p</span><br><span class="line"><span class="comment">// 123</span></span><br><span class="line"><span class="comment">// 因为writable为false，所以无法改变该属性的值</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>如果一次性定义或修改多个属性，可以使用Object.defineProperties方法。<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = Object.defineProperties(&#123;&#125;, &#123;</span><br><span class="line">        p1: &#123; value: <span class="number">123</span>, enumerable: <span class="literal">true</span> &#125;,</span><br><span class="line">        p2: &#123; value: <span class="string">"abc"</span>, enumerable: <span class="literal">true</span> &#125;,</span><br><span class="line">        p3: &#123; <span class="keyword">get</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.p1+<span class="keyword">this</span>.p2 &#125;,</span><br><span class="line">              enumerable:<span class="literal">true</span>,</span><br><span class="line">              configurable:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.p1 <span class="comment">// 123</span></span><br><span class="line">o.p2 <span class="comment">// "abc"</span></span><br><span class="line">o.p3 <span class="comment">// "123abc"</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中的p3属性，定义了取值函数get。这时需要注意的是，一旦定义了取值函数get（或存值函数set），就不能将writable设为true，或者同时定义value属性，否则会报错。<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">Object.defineProperty(o, <span class="string">"p"</span>, &#123;</span><br><span class="line">    value: <span class="number">123</span>, </span><br><span class="line">    <span class="keyword">get</span>: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">456</span>; &#125; </span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// TypeError: Invalid property. </span></span><br><span class="line"><span class="comment">// A property cannot both have accessors and be writable or have a value,</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码同时定义了get属性和value属性，结果就报错。<br>Object.defineProperty() 和Object.defineProperties() 的第三个参数，是一个属性对象。它的writable、configurable、enumerable这三个属性的默认值都为false。</p>
<p>###可枚举性（enumerable）<br>如果一个属性的enumerable为false，下面三个操作不会取到该属性。</p>
<ul>
<li>for..in循环</li>
<li>Object.keys方法</li>
<li><p>JSON.stringify方法</p>
<p>enumerable可以用来设置“秘密”属性:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;a:<span class="number">1</span>, b:<span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line">o.c = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">'d'</span>, &#123;</span><br><span class="line">  value: <span class="number">4</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.d</span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> key <span class="keyword">in</span> o ) <span class="built_in">console</span>.log( o[key] ); </span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(o)  <span class="comment">// ["a", "b", "c"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o <span class="comment">// =&gt; "&#123;a:1,b:2,c:3&#125;"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面代码中，d属性的enumerable为false，所以一般的遍历操作都无法获取该属性，使得它有点像“秘密”属性，但还是可以直接获取它的值。</p>
<p>至于for…in循环和Object.keys方法的区别，在于前者包括对象继承自原型对象的属性，而后者只包括对象本身的属性。如果需要获取对象自身的所有属性，不管enumerable的值，可以使用Object.getOwnPropertyNames方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> car = &#123;</span><br><span class="line">  id: <span class="number">123</span>,</span><br><span class="line">  color: red,</span><br><span class="line">  owner: <span class="number">12</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> owner = &#123;</span><br><span class="line">  id: <span class="number">12</span>,</span><br><span class="line">  name: Javi</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( car, <span class="string">'ownerOb'</span>, &#123;value: owner&#125; );</span><br><span class="line">car.ownerOb <span class="comment">// &#123;id:12, name:Javi&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(car) <span class="comment">//  '&#123;id: 123, color: "red", owner: 12&#125;'</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码中，owner对象作为注释，加入car对象。由于ownerOb属性的enumerable为false，所以JSON.stringify最后正式输出car对象时，会忽略ownerOb属性。</p>
<p>###Object.getOwnPropertyNames()<br>Object.getOwnPropertyNames方法返回直接定义在某个对象上面的全部属性的名称，而不管该属性是否可枚举。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var o = Object.defineProperties(&#123;&#125;, &#123;</span><br><span class="line"><span class="label">        p1:</span> &#123; <span class="string">value:</span> <span class="number">1</span>, <span class="string">enumerable:</span> <span class="literal">true</span> &#125;,</span><br><span class="line"><span class="label">        p2:</span> &#123; <span class="string">value:</span> <span class="number">2</span>, <span class="string">enumerable:</span> <span class="literal">false</span> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Object.getOwnPropertyNames(o)</span><br><span class="line"><span class="comment">// ["p1", "p2"]</span></span><br></pre></td></tr></table></figure></p>
<p>一般来说，系统原生的属性（即非用户自定义的属性）都是不可枚举的。<br>// 比如，数组实例自带length属性是不可枚举的</p>
<blockquote>
<p>Object.keys([]) // []<br>Object.getOwnPropertyNames([]) // [ ‘length’ ]<br>// Object.prototype对象的自带属性也都是不可枚举的<br>Object.keys(Object.prototype) // []<br>Object.getOwnPropertyNames(Object.prototype)<br>// [‘hasOwnProperty’,<br>//  ‘valueOf’,<br>//  ‘constructor’,<br>//  ‘toLocaleString’,<br>//  ‘isPrototypeOf’,<br>//  ‘propertyIsEnumerable’,<br>//  ‘toString’]</p>
</blockquote>
<p>上面代码可以看到，数组的实例对象（[]）没有可枚举属性，不可枚举属性有length；Object.prototype对象也没有可枚举属性，但是有不少不可枚举属性。</p>
<p>###Object.prototype.propertyIsEnumerable()<br>判断一个属性是否枚举：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> o</span> = &#123;&#125;;</span><br><span class="line">o.p = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">o.propertyIsEnumerable(<span class="string">"p"</span>) <span class="comment">// true</span></span><br><span class="line">o.propertyIsEnumerable(<span class="string">"toString"</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<p>###可配置性（configurable）<br>可配置性（configurable）决定了是否可以修改属性的描述对象。也就是说，当configure为false的时候，value、writable、enumerable和configurable都不能被修改了。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.defineProperty(&#123;&#125;, <span class="string">'p'</span>, &#123;</span><br><span class="line">        value: <span class="number">1</span>,</span><br><span class="line">        writable: <span class="keyword">false</span>, </span><br><span class="line">        enumerable: <span class="keyword">false</span>, </span><br><span class="line">        configurable: <span class="keyword">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o,<span class="string">'p'</span>, &#123;value: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="comment">// TypeError: Cannot redefine property: p</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o,<span class="string">'p'</span>, &#123;writable: <span class="keyword">true</span>&#125;)</span><br><span class="line"><span class="comment">// TypeError: Cannot redefine property: p</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o,<span class="string">'p'</span>, &#123;enumerable: <span class="keyword">true</span>&#125;)</span><br><span class="line"><span class="comment">// TypeError: Cannot redefine property: p</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperties(o,<span class="string">'p'</span>,&#123;configurable: <span class="keyword">true</span>&#125;)</span><br><span class="line"><span class="comment">// TypeError: Cannot redefine property: p</span></span><br></pre></td></tr></table></figure></p>
<p>上面代码首先生成对象o，并且定义属性p的configurable为false。然后，逐一改动value、writable、enumerable、configurable，结果都报错。<br>需要注意的是，writable只有在从false改为true会报错，从true改为false则是允许的。<br>至于value，只要writable和configurable有一个为true，就可以改动。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = Object.defineProperty(&#123;&#125;, <span class="string">'p'</span>, &#123;</span><br><span class="line">        <span class="keyword">value</span>: <span class="number">1</span>,</span><br><span class="line">        writable: <span class="keyword">true</span>,</span><br><span class="line">        configurable: <span class="keyword">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Object.defineProperty(o1,<span class="string">'p'</span>, &#123;<span class="keyword">value</span>: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="comment">// 修改成功</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = Object.defineProperty(&#123;&#125;, <span class="string">'p'</span>, &#123;</span><br><span class="line">        <span class="keyword">value</span>: <span class="number">1</span>,</span><br><span class="line">        writable: <span class="keyword">false</span>,</span><br><span class="line">        configurable: <span class="keyword">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Object.defineProperty(o2,<span class="string">'p'</span>, &#123;<span class="keyword">value</span>: <span class="number">2</span>&#125;) </span><br><span class="line"><span class="comment">// 修改成功</span></span><br></pre></td></tr></table></figure></p>
<p>可配置性决定了一个变量是否可以被删除（delete）。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var o = Object.defineProperties(&#123;&#125;, &#123;</span><br><span class="line">        p1: &#123; value: <span class="number">1</span>, configurable: <span class="literal">true</span> &#125;,</span><br><span class="line">        p2: &#123; value: <span class="number">2</span>, configurable: <span class="literal">false</span> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> o.p1 <span class="comment">// true</span></span><br><span class="line"><span class="keyword">delete</span> o.p2 <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">o.p1 <span class="comment">// undefined</span></span><br><span class="line">o.p2 <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></p>
<p>当使用var命令声明变量时，变量的configurable为false。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="keyword">this</span>,<span class="string">'a1'</span>)</span><br><span class="line"><span class="comment">// Object &#123;</span></span><br><span class="line"><span class="comment">// value: 1, </span></span><br><span class="line"><span class="comment">// writable: true, </span></span><br><span class="line"><span class="comment">// enumerable: true, </span></span><br><span class="line"><span class="comment">// configurable: false</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>而不使用var命令声明变量时（或者使用属性赋值的方式声明变量），变量的可配置性为true。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a2 = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="keyword">this</span>,<span class="string">'a2'</span>)</span><br><span class="line"><span class="comment">// Object &#123;</span></span><br><span class="line"><span class="comment">// value: 1, </span></span><br><span class="line"><span class="comment">// writable: true, </span></span><br><span class="line"><span class="comment">// enumerable: true, </span></span><br><span class="line"><span class="comment">// configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>// 或者写成<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.a3 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="keyword">this</span>,<span class="string">'a3'</span>)</span><br><span class="line"><span class="comment">// Object &#123;</span></span><br><span class="line"><span class="comment">// value: 1, </span></span><br><span class="line"><span class="comment">// writable: true, </span></span><br><span class="line"><span class="comment">// enumerable: true, </span></span><br><span class="line"><span class="comment">// configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></p>
<p>###可写性（writable）<br>可写性（writable）决定了属性的值（value）是否可以被改变。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var o = &#123;&#125;; </span><br><span class="line"></span><br><span class="line">Object.defineProperty(o, <span class="string">"a"</span>, &#123; value : <span class="number">37</span>, writable : <span class="literal">false</span> &#125;);</span><br><span class="line"></span><br><span class="line">o.a <span class="comment">// 37</span></span><br><span class="line">o.a = <span class="number">25</span>;</span><br><span class="line">o.a <span class="comment">// 37</span></span><br></pre></td></tr></table></figure></p>
<p>关于可写性，还有一种特殊情况。就是如果原型对象的某个属性的可写性为false，那么派生对象将无法自定义这个属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> proto = <span class="built_in">Object</span>.defineProperty(&#123;&#125;, <span class="string">'foo'</span>, &#123;</span><br><span class="line">    value: <span class="string">'a'</span>,</span><br><span class="line">    writable: <span class="keyword">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(proto);</span><br><span class="line"></span><br><span class="line">o.foo = <span class="string">'b'</span>;</span><br><span class="line">o.foo <span class="comment">// 'a'</span></span><br></pre></td></tr></table></figure></p>
<p>有一个规避方法，就是通过覆盖attributes对象，绕过这个限制，原因是这种情况下，原型链会被完全忽视。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">Object</span><span class="class">.defineProperty</span>(o, <span class="string">'foo'</span>, &#123; <span class="attribute">value</span>: <span class="string">'b'</span> &#125;);</span><br><span class="line"><span class="tag">o</span><span class="class">.foo</span> <span class="comment">// 'b'</span></span><br></pre></td></tr></table></figure></p>
<p>###存取器（accessor）<br>除了直接定义以外，属性还可以用存取器（accessor）定义。其中，存值函数称为setter，使用set命令；取值函数称为getter，使用get命令。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">get</span> <span class="title">p</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"getter"</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">set</span> <span class="title">p</span>(<span class="params"><span class="keyword">value</span></span>) </span>&#123;</span><br><span class="line">    console.log(<span class="string">"setter: "</span>+<span class="keyword">value</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>利用存取器，可以实现数据对象与DOM对象的双向绑定。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(user, <span class="string">'name'</span>, &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(<span class="string">"foo"</span>).value;</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"foo"</span>).value = newValue;</span><br><span class="line">  &#125;,</span><br><span class="line">  configurable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>###控制对象状态<br>JavaScript提供了三种方法，精确控制一个对象的读写状态，防止对象被改变。最弱一层的保护是preventExtensions，其次是seal，最强的freeze。</p>
<p>####Object.preventExtensions方法<br>Object.preventExtensions方法可以使得一个对象无法再添加新的属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(o);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">"p"</span>, &#123; value: <span class="string">"hello"</span> &#125;);</span><br><span class="line"><span class="comment">// TypeError: Cannot define property:p, object is not extensible.</span></span><br><span class="line"></span><br><span class="line">o.p = <span class="number">1</span>;</span><br><span class="line">o.p <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>不过，对于使用了preventExtensions方法的对象，可以用delete命令删除它的现有属性。</p>
<p>####Object.isExtensible方法<br>Object.isExtensible方法用于检查一个对象是否使用了preventExtensions方法。也就是说，该方法可以用来检查是否可以为一个对象添加属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.isExtensible(o)</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(o);</span><br><span class="line"><span class="built_in">Object</span>.isExtensible(o)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<p>####Object.seal方法<br>Object.seal方法使得一个对象既无法添加新属性，也无法删除旧属性。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p:<span class="string">"hello"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> o.p;</span><br><span class="line">o.p <span class="comment">// "hello"</span></span><br><span class="line"></span><br><span class="line">o.x = <span class="string">'world'</span>;</span><br><span class="line">o.x <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>Object.seal还把现有属性的attributes对象的configurable属性设为false，使得attributes对象不再能改变。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p: <span class="string">'a'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// seal方法之前</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(o, <span class="string">'p'</span>)</span><br><span class="line"><span class="comment">// Object &#123;value: "a", writable: true, enumerable: true, configurable: true&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line"></span><br><span class="line"><span class="comment">// seal方法之后</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(o, <span class="string">'p'</span>) </span><br><span class="line"><span class="comment">// Object &#123;value: "a", writable: true, enumerable: true, configurable: false&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">'p'</span>, &#123; enumerable: <span class="keyword">false</span> &#125;)</span><br><span class="line"><span class="comment">// TypeError: Cannot redefine property: p</span></span><br></pre></td></tr></table></figure></p>
<p>可写性（writable）有点特别。如果writable为false，使用Object.seal方法以后，将无法将其变成true；但是，如果writable为true，依然可以将其变成false。</p>
<p>至于属性对象的value是否可改变，是由writable决定的。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p: <span class="string">'a'</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line">o.p = <span class="string">'b'</span>;</span><br><span class="line">o.p <span class="comment">// 'b'</span></span><br></pre></td></tr></table></figure></p>
<p>####Object.isSealed方法<br>Object.isSealed方法用于检查一个对象是否使用了Object.seal方法。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; p: <span class="string">'a'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.seal(o);</span><br><span class="line"><span class="built_in">Object</span>.isSealed(o) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>####Object.freeze方法<br>Object.freeze方法可以使得一个对象无法添加新属性、无法删除旧属性、也无法改变属性的值，使得这个对象实际上变成了常量。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;p:<span class="string">"hello"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze(o);</span><br><span class="line"></span><br><span class="line">o.p = <span class="string">"world"</span>;</span><br><span class="line">o.p <span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line">o.t = <span class="string">"hello"</span>;</span><br><span class="line">o.t <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>####Object.isFrozen方法<br>Object.isFrozen方法用于检查一个对象是否使用了Object.freeze()方法。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;p:<span class="string">"hello"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze(o);</span><br><span class="line"><span class="built_in">Object</span>.isFrozen(o) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<p>###注意<br>需要注意的是，使用上面这些方法锁定对象的可写性，但是依然可以通过改变该对象的原型对象，来为它增加属性。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(o);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proto = <span class="built_in">Object</span>.getPrototypeOf(o);</span><br><span class="line"></span><br><span class="line">proto.t = <span class="string">"hello"</span>;</span><br><span class="line"></span><br><span class="line">o.t</span><br><span class="line"><span class="comment">// hello</span></span><br></pre></td></tr></table></figure></p>
<p>一种解决方案是，把原型也冻结住。<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.seal(</span><br><span class="line">            <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.freeze(&#123;x:<span class="number">1</span>&#125;),</span><br><span class="line">                &#123;y: &#123;value: <span class="number">2</span>, writable: <span class="keyword">true</span>&#125;&#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(o).t = <span class="string">"hello"</span>;</span><br><span class="line">o.hello <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/经验/">经验</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Jacy
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>